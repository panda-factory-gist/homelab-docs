<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="rss.xsl"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Olympus Lab Blog</title>
        <link>https://docs.olympus-lab.org/blog</link>
        <description>Olympus Lab Blog</description>
        <lastBuildDate>Tue, 02 Dec 2025 23:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[üê≥ D√©ploiement de services Docker avec Dockge]]></title>
            <link>https://docs.olympus-lab.org/blog/docker-services-deployment</link>
            <guid>https://docs.olympus-lab.org/blog/docker-services-deployment</guid>
            <pubDate>Tue, 02 Dec 2025 23:00:00 GMT</pubDate>
            <description><![CDATA[Aujourd'hui, j'ai d√©ploy√© mes premiers services en production sur Olympus Lab en utilisant Docker et Dockge. L'objectif : apprendre Docker en pratique, pas en regardant des cours !]]></description>
            <content:encoded><![CDATA[<p>Aujourd'hui, j'ai d√©ploy√© mes premiers services en production sur Olympus Lab en utilisant Docker et Dockge. L'objectif : apprendre Docker en pratique, pas en regardant des cours !</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-objectifs-du-jour">üéØ Objectifs du jour<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#-objectifs-du-jour" class="hash-link" aria-label="Direct link to üéØ Objectifs du jour" title="Direct link to üéØ Objectifs du jour" translate="no">‚Äã</a></h2>
<ul>
<li class="">D√©ployer Dockge pour g√©rer les containers Docker</li>
<li class="">Installer Uptime Kuma pour le monitoring</li>
<li class="">D√©ployer Nextcloud comme cloud personnel</li>
<li class="">Apprendre Docker Compose en pratique</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-services-d√©ploy√©s">üì¶ Services d√©ploy√©s<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#-services-d%C3%A9ploy%C3%A9s" class="hash-link" aria-label="Direct link to üì¶ Services d√©ploy√©s" title="Direct link to üì¶ Services d√©ploy√©s" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-dockge-gestion-docker">1. Dockge (Gestion Docker)<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#1-dockge-gestion-docker" class="hash-link" aria-label="Direct link to 1. Dockge (Gestion Docker)" title="Direct link to 1. Dockge (Gestion Docker)" translate="no">‚Äã</a></h3>
<p><strong>Pourquoi</strong> : Interface web pour g√©rer les stacks Docker Compose</p>
<p><strong>Configuration</strong> :</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">dockge</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> louislam/dockge</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">container_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dockge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> unless</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stopped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"5001:5001"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /var/run/docker.sock</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/var/run/docker.sock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/app/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./stacks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/opt/stacks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> DOCKGE_STACKS_DIR=/opt/stacks</span><br></span></code></pre></div></div>
<p><strong>Acc√®s</strong> : https: //dockge.[domain].org (prot√©g√© par Cloudflare Access)</p>
<p><strong>Avantages</strong> :</p>
<ul>
<li class="">Interface graphique pour d√©ployer des stacks</li>
<li class="">Logs en temps r√©el</li>
<li class="">Start/Stop/Restart en un clic</li>
<li class="">√âdition de docker-compose.yml directement</li>
</ul>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-uptime-kuma-monitoring">2. Uptime Kuma (Monitoring)<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#2-uptime-kuma-monitoring" class="hash-link" aria-label="Direct link to 2. Uptime Kuma (Monitoring)" title="Direct link to 2. Uptime Kuma (Monitoring)" translate="no">‚Äã</a></h3>
<p><strong>Pourquoi</strong> : Surveillance 24/7 de tous les services</p>
<p><strong>Configuration</strong> :</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">uptime-kuma</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> louislam/uptime</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kuma</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">container_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> uptime</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kuma</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> unless</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stopped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"3001:3001"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> uptime</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kuma</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/app/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uptime</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kuma</span><span class="token punctuation" style="color:#393A34">:</span><br></span></code></pre></div></div>
<p><strong>Acc√®s</strong> : https: //uptime.[domain].org</p>
<p><strong>Services monitor√©s</strong> :</p>
<ul>
<li class="">Proxmox</li>
<li class="">OPNsense</li>
<li class="">Dockge</li>
<li class="">Nextcloud</li>
<li class="">Documentation</li>
</ul>
<p><strong>Alertes</strong> : Bot Discord "Iris" (üåà) pour notifications en temps r√©el</p>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-nextcloud-cloud-personnel">3. Nextcloud (Cloud personnel)<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#3-nextcloud-cloud-personnel" class="hash-link" aria-label="Direct link to 3. Nextcloud (Cloud personnel)" title="Direct link to 3. Nextcloud (Cloud personnel)" translate="no">‚Äã</a></h3>
<p><strong>Pourquoi</strong> : Partage de fichiers entre tous mes appareils (PC, laptop, t√©l√©phone)</p>
<p><strong>Architecture</strong> :</p>
<ul>
<li class="">Nextcloud (application)</li>
<li class="">PostgreSQL (base de donn√©es)</li>
<li class="">Redis (cache)</li>
</ul>
<p><strong>Configuration</strong> :</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nextcloud</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nextcloud</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">container_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nextcloud</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> unless</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stopped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"8083:80"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> POSTGRES_HOST=db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> POSTGRES_DB=nextcloud</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> POSTGRES_USER=nextcloud</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> POSTGRES_PASSWORD=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">mot</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">de</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">passe</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">fort</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> REDIS_HOST=redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> NEXTCLOUD_TRUSTED_DOMAINS=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.org </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">IP</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">locale</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> TRUSTED_PROXIES=172.16.0.0/12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> OVERWRITEPROTOCOL=https</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> OVERWRITEHOST=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> nextcloud_data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/var/www/html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">depends_on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> nextcloud_net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">db</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">16</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">alpine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">container_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nextcloud</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> unless</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stopped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> POSTGRES_DB=nextcloud</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> POSTGRES_USER=nextcloud</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> POSTGRES_PASSWORD=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">mot</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">de</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">passe</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">fort</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> db_data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/var/lib/postgresql/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> nextcloud_net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">redis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">alpine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">container_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nextcloud</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> unless</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stopped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> nextcloud_net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nextcloud_data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">db_data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nextcloud_net</span><span class="token punctuation" style="color:#393A34">:</span><br></span></code></pre></div></div>
<p><strong>Acc√®s</strong> : https: //nextcloud.[domain].org</p>
<p><strong>Fonctionnalit√©s</strong> :</p>
<ul>
<li class="">Synchronisation automatique (desktop + mobile)</li>
<li class="">Partage de fichiers</li>
<li class="">Calendrier &amp; Contacts</li>
<li class="">Notes collaboratives</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-configuration-cloudflare-tunnel">üîß Configuration Cloudflare Tunnel<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#-configuration-cloudflare-tunnel" class="hash-link" aria-label="Direct link to üîß Configuration Cloudflare Tunnel" title="Direct link to üîß Configuration Cloudflare Tunnel" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="mise-√†-jour-du-tunnel-hermes">Mise √† jour du tunnel (Hermes)<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#mise-%C3%A0-jour-du-tunnel-hermes" class="hash-link" aria-label="Direct link to Mise √† jour du tunnel (Hermes)" title="Direct link to Mise √† jour du tunnel (Hermes)" translate="no">‚Äã</a></h3>
<p><strong>Fichier</strong> : <code>/etc/cloudflared/config.yml</code></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">tunnel</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">tunnel</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">credentials-file</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /etc/cloudflared/</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">tunnel</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">ingress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Services existants</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">hostname</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> opnsense.</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> //10.0.1.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">originServerName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 10.0.1.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">originRequest</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">noTLSVerify</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">hostname</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> proxmox.</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//192.168.1.51</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">8006</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">originRequest</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">noTLSVerify</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">hostname</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ssh</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">proxmox.</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ssh</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//192.168.1.51</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">22</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">hostname</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ssh</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">docker.</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ssh</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//10.0.1.102</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">22</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Nouveaux services Docker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">hostname</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dockge.</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//10.0.1.102</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">5001</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">hostname</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> uptime.</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//10.0.1.102</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">3001</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">hostname</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nextcloud.</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//10.0.1.102</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">8083</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Catch-all</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> http_status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">404</span><br></span></code></pre></div></div>
<p><strong>Red√©marrage</strong> :</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl restart cloudflared</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">journalctl -u cloudflared -f</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-s√©curit√©">üîê S√©curit√©<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#-s%C3%A9curit%C3%A9" class="hash-link" aria-label="Direct link to üîê S√©curit√©" title="Direct link to üîê S√©curit√©" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="cloudflare-access-zero-trust">Cloudflare Access (Zero Trust)<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#cloudflare-access-zero-trust" class="hash-link" aria-label="Direct link to Cloudflare Access (Zero Trust)" title="Direct link to Cloudflare Access (Zero Trust)" translate="no">‚Äã</a></h3>
<p><strong>Applications configur√©es</strong> :</p>
<table><thead><tr><th>Service</th><th>URL</th><th>Policy</th><th>Session</th></tr></thead><tbody><tr><td>Dockge</td><td>dockge.[domain].org</td><td>Email + OTP</td><td>24h</td></tr><tr><td>Uptime Kuma</td><td>uptime.[domain].org</td><td>Email + OTP</td><td>24h</td></tr><tr><td>Nextcloud</td><td>nextcloud.[domain].org</td><td>Email + OTP</td><td>24h</td></tr></tbody></table>
<p><strong>Protection multi-couches</strong> :</p>
<ol>
<li class="">Cloudflare Edge (DDoS, WAF)</li>
<li class="">Cloudflare Access (authentification email + OTP)</li>
<li class="">Cloudflare Tunnel (z√©ro port ouvert)</li>
<li class="">Firewall OPNsense (r√®gles granulaires)</li>
<li class="">Authentification service (login/password)</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="isolation-r√©seau">Isolation r√©seau<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#isolation-r%C3%A9seau" class="hash-link" aria-label="Direct link to Isolation r√©seau" title="Direct link to Isolation r√©seau" translate="no">‚Äã</a></h3>
<p><strong>VM Docker</strong> : R√©seau LAN (10.0.1.0/24)</p>
<ul>
<li class="">‚úÖ Acc√®s Internet</li>
<li class="">‚úÖ Communication interne LAN</li>
<li class="">‚ùå Pas d'acc√®s DMZ, DEV, MGMT</li>
</ul>
<p><strong>Containers Docker</strong> : R√©seau bridge isol√© (172.x.x.x/12)</p>
<ul>
<li class="">Communication entre containers de la m√™me stack uniquement</li>
<li class="">Pas d'acc√®s direct aux autres containers</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-apprentissage-docker">üìö Apprentissage Docker<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#-apprentissage-docker" class="hash-link" aria-label="Direct link to üìö Apprentissage Docker" title="Direct link to üìö Apprentissage Docker" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="ce-que-jai-appris-en-pratique">Ce que j'ai appris en pratique<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#ce-que-jai-appris-en-pratique" class="hash-link" aria-label="Direct link to Ce que j'ai appris en pratique" title="Direct link to Ce que j'ai appris en pratique" translate="no">‚Äã</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-docker-compose---structure">1. Docker Compose - Structure<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#1-docker-compose---structure" class="hash-link" aria-label="Direct link to 1. Docker Compose - Structure" title="Direct link to 1. Docker Compose - Structure" translate="no">‚Äã</a></h4>
<p><strong>Services</strong> : Liste des containers √† cr√©er</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mon-app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">...</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-images-docker">2. Images Docker<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#2-images-docker" class="hash-link" aria-label="Direct link to 2. Images Docker" title="Direct link to 2. Images Docker" translate="no">‚Äã</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nextcloud</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span></code></pre></div></div>
<ul>
<li class=""><code>nextcloud</code> = nom de l'image</li>
<li class=""><code>:latest</code> = tag (version)</li>
</ul>
<p><strong>Alternatives</strong> :</p>
<ul>
<li class=""><code>:1.23.11</code> = version sp√©cifique (plus stable)</li>
<li class=""><code>:alpine</code> = version l√©g√®re</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-ports">3. Ports<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#3-ports" class="hash-link" aria-label="Direct link to 3. Ports" title="Direct link to 3. Ports" translate="no">‚Äã</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"8083:80"</span><br></span></code></pre></div></div>
<ul>
<li class=""><code>8083</code> = port sur la VM (externe)</li>
<li class=""><code>80</code> = port dans le container (interne)</li>
</ul>
<p><strong>Utilisation</strong> : <code>http://10.0.1.102:8083</code> pointe vers le port 80 du container</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-volumes-persistance-des-donn√©es">4. Volumes (persistance des donn√©es)<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#4-volumes-persistance-des-donn%C3%A9es" class="hash-link" aria-label="Direct link to 4. Volumes (persistance des donn√©es)" title="Direct link to 4. Volumes (persistance des donn√©es)" translate="no">‚Äã</a></h4>
<p><strong>Volumes nomm√©s</strong> :</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> nextcloud_data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/var/www/html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nextcloud_data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># D√©claration</span><br></span></code></pre></div></div>
<ul>
<li class="">G√©r√© par Docker</li>
<li class="">Stock√© dans <code>/var/lib/docker/volumes/</code></li>
<li class="">Persiste m√™me si container supprim√©</li>
</ul>
<p><strong>Bind mounts</strong> :</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/app/data</span><br></span></code></pre></div></div>
<ul>
<li class="">Dossier local mont√© directement</li>
<li class="">Fichiers visibles sur la VM</li>
<li class="">Modifiable √† chaud</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="5-networks-communication-inter-containers">5. Networks (communication inter-containers)<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#5-networks-communication-inter-containers" class="hash-link" aria-label="Direct link to 5. Networks (communication inter-containers)" title="Direct link to 5. Networks (communication inter-containers)" translate="no">‚Äã</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> nextcloud_net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nextcloud_net</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># D√©claration</span><br></span></code></pre></div></div>
<p><strong>Utilit√©</strong> : Les containers sur le m√™me network peuvent communiquer par nom</p>
<ul>
<li class=""><code>nextcloud</code> peut joindre <code>db</code> directement</li>
<li class=""><code>POSTGRES_HOST=db</code> fonctionne</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="6-environment-variables">6. Environment variables<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#6-environment-variables" class="hash-link" aria-label="Direct link to 6. Environment variables" title="Direct link to 6. Environment variables" translate="no">‚Äã</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> POSTGRES_PASSWORD=secure123</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> POSTGRES_HOST=db</span><br></span></code></pre></div></div>
<p><strong>Configuration sans rebuild</strong> : Change le comportement du container</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="7-depends_on-ordre-de-d√©marrage">7. Depends_on (ordre de d√©marrage)<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#7-depends_on-ordre-de-d%C3%A9marrage" class="hash-link" aria-label="Direct link to 7. Depends_on (ordre de d√©marrage)" title="Direct link to 7. Depends_on (ordre de d√©marrage)" translate="no">‚Äã</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">depends_on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> redis</span><br></span></code></pre></div></div>
<p><strong>Utilit√©</strong> : Nextcloud d√©marre APR√àS PostgreSQL et Redis</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="8-restart-policies">8. Restart policies<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#8-restart-policies" class="hash-link" aria-label="Direct link to 8. Restart policies" title="Direct link to 8. Restart policies" translate="no">‚Äã</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> unless</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stopped</span><br></span></code></pre></div></div>
<p><strong>Options</strong> :</p>
<ul>
<li class=""><code>no</code> : Ne jamais red√©marrer</li>
<li class=""><code>always</code> : Toujours red√©marrer (m√™me si arr√™t√© manuellement)</li>
<li class=""><code>unless-stopped</code> : Red√©marrer sauf si arr√™t√© volontairement</li>
<li class=""><code>on-failure</code> : Red√©marrer seulement si erreur</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-probl√®mes-rencontr√©s-et-solutions">üêõ Probl√®mes rencontr√©s et solutions<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#-probl%C3%A8mes-rencontr%C3%A9s-et-solutions" class="hash-link" aria-label="Direct link to üêõ Probl√®mes rencontr√©s et solutions" title="Direct link to üêõ Probl√®mes rencontr√©s et solutions" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="probl√®me-1--cache-navigateur">Probl√®me 1 : Cache navigateur<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#probl%C3%A8me-1--cache-navigateur" class="hash-link" aria-label="Direct link to Probl√®me 1 : Cache navigateur" title="Direct link to Probl√®me 1 : Cache navigateur" translate="no">‚Äã</a></h3>
<p><strong>Sympt√¥me</strong> : "Unable to find your Access application"
<strong>Cause</strong> : Cache SSL du navigateur
<strong>Solution</strong> : Navigation priv√©e ou vider le cache (Ctrl+Shift+Delete)</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="probl√®me-2--postgresql-sans-mot-de-passe">Probl√®me 2 : PostgreSQL sans mot de passe<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#probl%C3%A8me-2--postgresql-sans-mot-de-passe" class="hash-link" aria-label="Direct link to Probl√®me 2 : PostgreSQL sans mot de passe" title="Direct link to Probl√®me 2 : PostgreSQL sans mot de passe" translate="no">‚Äã</a></h3>
<p><strong>Sympt√¥me</strong> : <code>POSTGRES_PASSWORD is not specified</code>
<strong>Cause</strong> : Variable d'environnement mal format√©e
<strong>Solution</strong> : Utiliser <code>- POSTGRES_PASSWORD=xxx</code> (avec le tiret)</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="probl√®me-3--nextcloud-ne-peut-pas-joindre-db">Probl√®me 3 : Nextcloud ne peut pas joindre "db"<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#probl%C3%A8me-3--nextcloud-ne-peut-pas-joindre-db" class="hash-link" aria-label="Direct link to Probl√®me 3 : Nextcloud ne peut pas joindre &quot;db&quot;" title="Direct link to Probl√®me 3 : Nextcloud ne peut pas joindre &quot;db&quot;" translate="no">‚Äã</a></h3>
<p><strong>Sympt√¥me</strong> : <code>could not translate host name "db"</code>
<strong>Cause</strong> : Containers pas sur le m√™me r√©seau Docker
<strong>Solution</strong> : V√©rifier la section <code>networks</code> dans docker-compose.yml</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="probl√®me-4--configuration-nextcloud-prot√©g√©e">Probl√®me 4 : Configuration Nextcloud prot√©g√©e<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#probl%C3%A8me-4--configuration-nextcloud-prot%C3%A9g%C3%A9e" class="hash-link" aria-label="Direct link to Probl√®me 4 : Configuration Nextcloud prot√©g√©e" title="Direct link to Probl√®me 4 : Configuration Nextcloud prot√©g√©e" translate="no">‚Äã</a></h3>
<p><strong>Sympt√¥me</strong> : <code>Configuration was not read or initialized correctly</code>
<strong>Cause</strong> : Tentative de r√©installation avec donn√©es existantes
<strong>Solution</strong> : <code>docker compose down -v</code> pour supprimer les volumes</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-architecture-finale">üìä Architecture finale<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#-architecture-finale" class="hash-link" aria-label="Direct link to üìä Architecture finale" title="Direct link to üìä Architecture finale" translate="no">‚Äã</a></h2>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Internet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚Üì</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Cloudflare Edge (DDoS, WAF)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚Üì</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Cloudflare Access (Email + OTP)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚Üì</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Cloudflare Tunnel (Hermes CT-202)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚Üì</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VM Docker (10.0.1.102)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚Üì</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚îú‚îÄ‚Üí Dockge :5001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚îú‚îÄ‚Üí Uptime Kuma :3001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚îî‚îÄ‚Üí Nextcloud Stack</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ‚îú‚îÄ‚Üí nextcloud :80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ‚îú‚îÄ‚Üí postgres :5432</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ‚îî‚îÄ‚Üí redis :6379</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-prochaines-√©tapes">üéØ Prochaines √©tapes<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#-prochaines-%C3%A9tapes" class="hash-link" aria-label="Direct link to üéØ Prochaines √©tapes" title="Direct link to üéØ Prochaines √©tapes" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="cette-semaine">Cette semaine<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#cette-semaine" class="hash-link" aria-label="Direct link to Cette semaine" title="Direct link to Cette semaine" translate="no">‚Äã</a></h3>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Installer app Nextcloud sur tous les appareils</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Pr√©parer projet Docker Compose pour l'√©cole</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Activer 2FA sur OPNsense et Proxmox</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="d√©cembre-2025">D√©cembre 2025<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#d%C3%A9cembre-2025" class="hash-link" aria-label="Direct link to D√©cembre 2025" title="Direct link to D√©cembre 2025" translate="no">‚Äã</a></h3>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Python (Automate the Boring Stuff)</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Networking (Practical Networking)</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Utiliser Nextcloud en mobilit√©</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="janvier-2026">Janvier 2026<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#janvier-2026" class="hash-link" aria-label="Direct link to Janvier 2026" title="Direct link to Janvier 2026" translate="no">‚Äã</a></h3>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->GitLab CE ou Gitea (h√©bergement code)</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Prometheus + Grafana (monitoring avanc√©)</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Pi-hole (DNS + blocage pub)</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-r√©flexions">üí≠ R√©flexions<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#-r%C3%A9flexions" class="hash-link" aria-label="Direct link to üí≠ R√©flexions" title="Direct link to üí≠ R√©flexions" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="lapprentissage-par-la-pratique">L'apprentissage par la pratique<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#lapprentissage-par-la-pratique" class="hash-link" aria-label="Direct link to L'apprentissage par la pratique" title="Direct link to L'apprentissage par la pratique" translate="no">‚Äã</a></h3>
<p>J'ai r√©alis√© aujourd'hui que <strong>je n'aime pas les cours th√©oriques</strong>, j'aime <strong>FAIRE</strong>.</p>
<p><strong>Avant</strong> : "Docker c'est compliqu√©, il faut apprendre toutes les commandes"
<strong>Maintenant</strong> : "Docker c'est juste un outil, on l'utilise quand on en a besoin"</p>
<p><strong>La diff√©rence</strong> :</p>
<ul>
<li class="">‚ùå Cours Udemy : 20h de vid√©os th√©oriques ‚Üí Ennui ‚Üí Oubli</li>
<li class="">‚úÖ Projet concret : "Je veux Nextcloud" ‚Üí Docker Compose ‚Üí D√©ploiement ‚Üí Apprentissage r√©el</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="ce-que-jai-vraiment-appris">Ce que j'ai vraiment appris<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#ce-que-jai-vraiment-appris" class="hash-link" aria-label="Direct link to Ce que j'ai vraiment appris" title="Direct link to Ce que j'ai vraiment appris" translate="no">‚Äã</a></h3>
<ul>
<li class="">üê≥ <strong>Docker Compose</strong> : Services, volumes, networks, environment</li>
<li class="">üîß <strong>Debugging</strong> : Lire les logs, comprendre les erreurs, tester</li>
<li class="">üåê <strong>Networking</strong> : Communication inter-containers, isolation</li>
<li class="">üéØ <strong>M√©thodologie</strong> : D√©ployer, casser, r√©parer, documenter</li>
</ul>
<p><strong>Et tout √ßa en UNE journ√©e</strong> parce que j'avais un <strong>objectif concret</strong> : avoir un cloud perso.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="pour-les-d√©butants">Pour les d√©butants<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#pour-les-d%C3%A9butants" class="hash-link" aria-label="Direct link to Pour les d√©butants" title="Direct link to Pour les d√©butants" translate="no">‚Äã</a></h3>
<p>Si tu d√©butes en Docker :</p>
<ol>
<li class=""><strong>Ne regarde PAS 20h de cours</strong></li>
<li class=""><strong>Choisis UN service</strong> que tu veux d√©ployer</li>
<li class=""><strong>Trouve un docker-compose.yml</strong></li>
<li class=""><strong>D√©ploie-le</strong></li>
<li class=""><strong>Casse-le</strong></li>
<li class=""><strong>Comprends pourquoi</strong></li>
<li class=""><strong>R√©pare-le</strong></li>
<li class=""><strong>R√©p√®te</strong></li>
</ol>
<p>Tu apprendras <strong>10x plus vite</strong> qu'en regardant des cours.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-statistiques">üìà Statistiques<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#-statistiques" class="hash-link" aria-label="Direct link to üìà Statistiques" title="Direct link to üìà Statistiques" translate="no">‚Äã</a></h2>
<p><strong>Temps investi</strong> : ~6 heures</p>
<ul>
<li class="">D√©ploiement Dockge : 30 min</li>
<li class="">D√©ploiement Uptime Kuma : 45 min</li>
<li class="">Configuration Iris (Discord) : 15 min</li>
<li class="">D√©ploiement Nextcloud : 3h (debug inclus)</li>
<li class="">Documentation : 1h</li>
</ul>
<p><strong>Services d√©ploy√©s</strong> : 3 stacks (6 containers)
<strong>Probl√®mes r√©solus</strong> : 4 (cache, PostgreSQL, r√©seau, config)
<strong>Lignes de YAML √©crites</strong> : ~150
<strong>Caf√© consomm√©</strong> : Beaucoup ‚òï</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-ressources">üîó Ressources<a href="https://docs.olympus-lab.org/blog/docker-services-deployment#-ressources" class="hash-link" aria-label="Direct link to üîó Ressources" title="Direct link to üîó Ressources" translate="no">‚Äã</a></h2>
<p><strong>Documentation</strong> :</p>
<ul>
<li class="">Docker Compose : <a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer" class="">https://docs.docker.com/compose/</a></li>
<li class="">Nextcloud : <a href="https://hub.docker.com/_/nextcloud" target="_blank" rel="noopener noreferrer" class="">https://hub.docker.com/_/nextcloud</a></li>
<li class="">Dockge : <a href="https://github.com/louislam/dockge" target="_blank" rel="noopener noreferrer" class="">https://github.com/louislam/dockge</a></li>
<li class="">Uptime Kuma : <a href="https://github.com/louislam/uptime-kuma" target="_blank" rel="noopener noreferrer" class="">https://github.com/louislam/uptime-kuma</a></li>
</ul>
<p><strong>Mon infrastructure</strong> :</p>
<ul>
<li class="">Documentation : https: //docs.[domain].org</li>
<li class="">Monitoring : https: //uptime.[domain].org</li>
</ul>
<hr>
<p><strong>Stack</strong> : Docker ‚Ä¢ Docker Compose ‚Ä¢ Dockge ‚Ä¢ Nextcloud ‚Ä¢ PostgreSQL ‚Ä¢ Redis ‚Ä¢ Uptime Kuma</p>
<p><strong>Tags</strong> : #Docker #Containers #Nextcloud #Cloud #DevOps #Learning</p>]]></content:encoded>
            <category>docker</category>
            <category>nextcloud</category>
            <category>monitoring</category>
            <category>dockge</category>
            <category>containers</category>
        </item>
        <item>
            <title><![CDATA[üèõÔ∏è Olympus Lab - Infrastructure compl√®te op√©rationnelle]]></title>
            <link>https://docs.olympus-lab.org/blog/olympus-lab-setup</link>
            <guid>https://docs.olympus-lab.org/blog/olympus-lab-setup</guid>
            <pubDate>Mon, 01 Dec 2025 13:00:00 GMT</pubDate>
            <description><![CDATA[Aujourd'hui marque l'ach√®vement de l'infrastructure Olympus Lab, mon homelab DevOps personnel. Apr√®s plusieurs semaines de travail, j'ai enfin une plateforme compl√®te pour apprendre et exp√©rimenter en toute s√©curit√©.]]></description>
            <content:encoded><![CDATA[<p>Aujourd'hui marque l'ach√®vement de l'infrastructure <strong>Olympus Lab</strong>, mon homelab DevOps personnel. Apr√®s plusieurs semaines de travail, j'ai enfin une plateforme compl√®te pour apprendre et exp√©rimenter en toute s√©curit√©.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-le-contexte">üéØ Le contexte<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#-le-contexte" class="hash-link" aria-label="Direct link to üéØ Le contexte" title="Direct link to üéØ Le contexte" translate="no">‚Äã</a></h2>
<p>Je suis actuellement en alternance chez ARPEGE √† Nantes en tant qu'√©tudiante DevOps (TSSR √† l'ESGI). Mon apprentissage se concentre sur :</p>
<ul>
<li class="">Ansible pour l'automatisation</li>
<li class="">GitLab CI/CD pour les pipelines</li>
<li class="">Docker &amp; Kubernetes pour la conteneurisation</li>
<li class="">Oracle Cloud Infrastructure pour le d√©ploiement</li>
</ul>
<p>Mais pour vraiment ma√Ætriser ces technologies, j'avais besoin d'un environnement o√π je peux <strong>casser, reconstruire, exp√©rimenter</strong> sans limites. D'o√π <strong>Olympus Lab</strong> ! üèõÔ∏è</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="Ô∏è-architecture-finale">üèóÔ∏è Architecture finale<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#%EF%B8%8F-architecture-finale" class="hash-link" aria-label="Direct link to üèóÔ∏è Architecture finale" title="Direct link to üèóÔ∏è Architecture finale" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="le-setup-physique">Le setup physique<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#le-setup-physique" class="hash-link" aria-label="Direct link to Le setup physique" title="Direct link to Le setup physique" translate="no">‚Äã</a></h3>
<p><strong>Machine</strong> : Lenovo ThinkCentre M710S</p>
<ul>
<li class="">CPU : Intel i5 (suffisant pour commencer)</li>
<li class="">RAM : 16 GB (√† upgrader plus tard)</li>
<li class="">Stockage : SSD pour l'OS, HDD pour les VMs</li>
<li class="">R√©seau : 1 Gbps vers la box Internet</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="les-composants-logiciels">Les composants logiciels<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#les-composants-logiciels" class="hash-link" aria-label="Direct link to Les composants logiciels" title="Direct link to Les composants logiciels" translate="no">‚Äã</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-proxmox-ve-atlas-dans-ma-nomenclature">1. <strong>Proxmox VE</strong> (Atlas dans ma nomenclature)<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#1-proxmox-ve-atlas-dans-ma-nomenclature" class="hash-link" aria-label="Direct link to 1-proxmox-ve-atlas-dans-ma-nomenclature" title="Direct link to 1-proxmox-ve-atlas-dans-ma-nomenclature" translate="no">‚Äã</a></h4>
<p>L'hyperviseur qui fait tourner tout le reste. J'ai configur√© 5 bridges r√©seau :</p>
<ul>
<li class=""><code>vmbr0</code> : WAN (192.168.1.0/24) - Connexion Internet</li>
<li class=""><code>vmbr1</code> : LAN (10.0.1.0/24) - Production</li>
<li class=""><code>vmbr2</code> : DMZ (10.0.2.0/24) - Services expos√©s</li>
<li class=""><code>vmbr3</code> : DEV (10.0.3.0/24) - Environnement de test</li>
<li class=""><code>vmbr4</code> : MGMT (10.0.4.0/24) - Administration</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-opnsense-olympus---vm-100">2. <strong>OPNsense</strong> (Olympus - VM 100)<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#2-opnsense-olympus---vm-100" class="hash-link" aria-label="Direct link to 2-opnsense-olympus---vm-100" title="Direct link to 2-opnsense-olympus---vm-100" translate="no">‚Äã</a></h4>
<p>Le firewall FreeBSD qui g√®re toute la segmentation r√©seau. Configuration :</p>
<ul>
<li class="">5 interfaces r√©seau (1 par bridge)</li>
<li class="">R√®gles firewall strictes avec isolation compl√®te</li>
<li class="">DHCP sur chaque r√©seau</li>
<li class="">DNS forwarding vers Cloudflare (1.1.1.1)</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-cloudflare-tunnel-hermes---container-202">3. <strong>Cloudflare Tunnel</strong> (Hermes - Container 202)<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#3-cloudflare-tunnel-hermes---container-202" class="hash-link" aria-label="Direct link to 3-cloudflare-tunnel-hermes---container-202" title="Direct link to 3-cloudflare-tunnel-hermes---container-202" translate="no">‚Äã</a></h4>
<p>Le messager qui me permet d'acc√©der √† mon homelab depuis n'importe o√π. Ubuntu 24.04 LXC avec <code>cloudflared</code> :</p>
<ul>
<li class="">256 MB RAM (ultra l√©ger)</li>
<li class="">Tunnel chiffr√© vers Cloudflare Edge</li>
<li class="">Z√©ro port ouvert sur ma box Internet</li>
<li class="">Authentification Zero Trust avec Cloudflare Access</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-segmentation-r√©seau">üåê Segmentation r√©seau<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#-segmentation-r%C3%A9seau" class="hash-link" aria-label="Direct link to üåê Segmentation r√©seau" title="Direct link to üåê Segmentation r√©seau" translate="no">‚Äã</a></h2>
<p>Le point le plus important : <strong>l'isolation des r√©seaux</strong>.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îÇ              Internet                        ‚îÇ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   ‚îÇ WAN (192.168.1.0/24)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ‚îÇ  OPNsense   ‚îÇ ‚Üê Firewall central</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ‚îÇ  (Olympus)  ‚îÇ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ‚îÇ           ‚îÇ           ‚îÇ         ‚îÇ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îê</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ‚îÇ  LAN  ‚îÇ   ‚îÇ DMZ ‚îÇ    ‚îÇ DEV  ‚îÇ  ‚îÇ MGMT ‚îÇ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ‚îÇ Prod  ‚îÇ   ‚îÇ Web ‚îÇ    ‚îÇ Test ‚îÇ  ‚îÇAdmin ‚îÇ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="les-r√®gles-qui-changent-tout">Les r√®gles qui changent tout<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#les-r%C3%A8gles-qui-changent-tout" class="hash-link" aria-label="Direct link to Les r√®gles qui changent tout" title="Direct link to Les r√®gles qui changent tout" translate="no">‚Äã</a></h3>
<p><strong>LAN</strong> (Production) :</p>
<ul>
<li class="">‚úÖ Acc√®s Internet</li>
<li class="">‚úÖ Communication interne au LAN</li>
<li class="">‚ùå Acc√®s aux autres r√©seaux (DMZ, DEV, MGMT)</li>
</ul>
<p><strong>DMZ</strong> (Services expos√©s) :</p>
<ul>
<li class="">‚úÖ Acc√®s Internet uniquement</li>
<li class="">‚ùå <strong>Aucun acc√®s</strong> aux r√©seaux internes</li>
</ul>
<p><strong>DEV</strong> (D√©veloppement) :</p>
<ul>
<li class="">‚úÖ Acc√®s Internet uniquement</li>
<li class="">‚ùå <strong>Aucun acc√®s</strong> aux r√©seaux internes</li>
</ul>
<p><strong>MGMT</strong> (Administration) :</p>
<ul>
<li class="">‚úÖ <strong>Acc√®s partout</strong> (pour g√©rer l'infrastructure)</li>
</ul>
<p><strong>Pourquoi c'est important ?</strong> Si je fais une erreur en DEV ou si un service en DMZ est compromis, l'attaquant ne peut <strong>pas</strong> rebondir vers la production. C'est le principe de <strong>Defense in Depth</strong>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-s√©curit√©-multi-couches">üîí S√©curit√© multi-couches<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#-s%C3%A9curit%C3%A9-multi-couches" class="hash-link" aria-label="Direct link to üîí S√©curit√© multi-couches" title="Direct link to üîí S√©curit√© multi-couches" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="couche-1--cloudflare-edge">Couche 1 : Cloudflare Edge<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#couche-1--cloudflare-edge" class="hash-link" aria-label="Direct link to Couche 1 : Cloudflare Edge" title="Direct link to Couche 1 : Cloudflare Edge" translate="no">‚Äã</a></h3>
<ul>
<li class="">Protection DDoS automatique</li>
<li class="">WAF (Web Application Firewall)</li>
<li class="">Filtrage g√©ographique possible</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="couche-2--cloudflare-access-zero-trust">Couche 2 : Cloudflare Access (Zero Trust)<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#couche-2--cloudflare-access-zero-trust" class="hash-link" aria-label="Direct link to Couche 2 : Cloudflare Access (Zero Trust)" title="Direct link to Couche 2 : Cloudflare Access (Zero Trust)" translate="no">‚Äã</a></h3>
<ul>
<li class="">Authentification obligatoire par email</li>
<li class="">Code OTP √† usage unique</li>
<li class="">Logs d'audit de toutes les connexions</li>
<li class="">Session limit√©e √† 24h</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="couche-3--cloudflare-tunnel">Couche 3 : Cloudflare Tunnel<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#couche-3--cloudflare-tunnel" class="hash-link" aria-label="Direct link to Couche 3 : Cloudflare Tunnel" title="Direct link to Couche 3 : Cloudflare Tunnel" translate="no">‚Äã</a></h3>
<ul>
<li class="">Connexion chiffr√©e sortante uniquement</li>
<li class="">Aucun port ouvert sur ma box</li>
<li class="">IP publique cach√©e</li>
<li class="">Impossible de scanner mon r√©seau depuis Internet</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="couche-4--opnsense-firewall">Couche 4 : OPNsense Firewall<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#couche-4--opnsense-firewall" class="hash-link" aria-label="Direct link to Couche 4 : OPNsense Firewall" title="Direct link to Couche 4 : OPNsense Firewall" translate="no">‚Äã</a></h3>
<ul>
<li class="">Firewall stateful (pf de FreeBSD)</li>
<li class="">Default Deny : tout bloqu√© par d√©faut</li>
<li class="">R√®gles granulaires par r√©seau</li>
<li class="">Logs de toutes les tentatives bloqu√©es</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="couche-5--services-individuels">Couche 5 : Services individuels<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#couche-5--services-individuels" class="hash-link" aria-label="Direct link to Couche 5 : Services individuels" title="Direct link to Couche 5 : Services individuels" translate="no">‚Äã</a></h3>
<ul>
<li class="">2FA sur Proxmox (TOTP)</li>
<li class="">2FA sur OPNsense (Google Authenticator)</li>
<li class="">Mots de passe forts (20+ caract√®res)</li>
<li class="">Cl√©s SSH pour l'authentification</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="Ô∏è-acc√®s-distant-sans-port-forwarding">‚òÅÔ∏è Acc√®s distant sans port forwarding<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#%EF%B8%8F-acc%C3%A8s-distant-sans-port-forwarding" class="hash-link" aria-label="Direct link to ‚òÅÔ∏è Acc√®s distant sans port forwarding" title="Direct link to ‚òÅÔ∏è Acc√®s distant sans port forwarding" translate="no">‚Äã</a></h2>
<p>Le gros challenge : comment acc√©der √† mon homelab depuis chez mes parents en d√©cembre ?</p>
<p><strong>Solution classique</strong> : Port forwarding (ouvrir le port 51820 pour WireGuard)</p>
<ul>
<li class="">‚ùå Port ouvert = surface d'attaque</li>
<li class="">‚ùå IP publique expos√©e</li>
<li class="">‚ùå Risque de scan et brute force</li>
</ul>
<p><strong>Ma solution</strong> : Cloudflare Tunnel</p>
<ul>
<li class="">‚úÖ Connexion sortante uniquement (aucun port ouvert)</li>
<li class="">‚úÖ IP publique masqu√©e</li>
<li class="">‚úÖ Authentification obligatoire</li>
<li class="">‚úÖ Gratuit !</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="services-accessibles">Services accessibles<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#services-accessibles" class="hash-link" aria-label="Direct link to Services accessibles" title="Direct link to Services accessibles" translate="no">‚Äã</a></h3>
<p>J'ai configur√© trois points d'acc√®s via Cloudflare Tunnel :</p>
<ul>
<li class=""><strong>Interface de virtualisation</strong> : Gestion des VMs et containers</li>
<li class=""><strong>Interface du firewall</strong> : Configuration des r√®gles r√©seau</li>
<li class=""><strong>Acc√®s SSH</strong> : Administration en ligne de commande</li>
</ul>
<p>Tous prot√©g√©s par Cloudflare Access avec authentification obligatoire (email + code OTP).</p>
<p>Exemple d'utilisation SSH :</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Sur mon laptop, n'importe o√π dans le monde</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh homelab-ssh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Cloudflare ouvre le navigateur pour l'authentification</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Code OTP par email</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Connexion √©tablie ‚úÖ</span><br></span></code></pre></div></div>
<p><strong>Note de s√©curit√©</strong> : Les URLs exactes ne sont pas publi√©es publiquement.
Prochaine √©tape : Activation du 2FA sur tous les services (en cours).</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-documentation-compl√®te">üìö Documentation compl√®te<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#-documentation-compl%C3%A8te" class="hash-link" aria-label="Direct link to üìö Documentation compl√®te" title="Direct link to üìö Documentation compl√®te" translate="no">‚Äã</a></h2>
<p>Tout est document√© sur <a href="https://docs.olympus-lab.org/" target="_blank" rel="noopener noreferrer" class="">docs.olympus-lab.org</a> avec Docusaurus :</p>
<ul>
<li class=""><strong>Architecture</strong> : Vue d'ensemble, diagrammes r√©seau</li>
<li class=""><strong>Proxmox</strong> : Configuration, bridges, VMs, containers</li>
<li class=""><strong>OPNsense</strong> : Firewall, r√®gles d√©taill√©es, DHCP, NAT</li>
<li class=""><strong>Cloudflare Tunnel</strong> : Setup, configuration, troubleshooting</li>
<li class=""><strong>S√©curit√©</strong> : R√®gles firewall expliqu√©es, threat model</li>
<li class=""><strong>Proc√©dures</strong> : Acc√®s distant, maintenance, backups</li>
</ul>
<p>La doc est h√©berg√©e sur GitHub Pages avec d√©ploiement automatique via GitHub Actions. Chaque <code>git push</code> met √† jour le site.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="Ô∏è-les-gal√®res-et-apprentissages">üõ†Ô∏è Les gal√®res et apprentissages<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#%EF%B8%8F-les-gal%C3%A8res-et-apprentissages" class="hash-link" aria-label="Direct link to üõ†Ô∏è Les gal√®res et apprentissages" title="Direct link to üõ†Ô∏è Les gal√®res et apprentissages" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="probl√®me-1--changement-de-hostname-proxmox">Probl√®me 1 : Changement de hostname Proxmox<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#probl%C3%A8me-1--changement-de-hostname-proxmox" class="hash-link" aria-label="Direct link to Probl√®me 1 : Changement de hostname Proxmox" title="Direct link to Probl√®me 1 : Changement de hostname Proxmox" translate="no">‚Äã</a></h3>
<p>J'ai voulu renommer <code>fox-factory</code> en <code>atlas</code> (nomenclature mythologique grecque). <strong>Grosse erreur</strong> ! Proxmox garde les r√©f√©rences au nom original dans <code>/etc/pve/</code>, qui est un filesystem cluster sp√©cial.</p>
<p><strong>R√©sultat</strong> : Tous mes containers et VMs ont disparu de l'interface ! üò±</p>
<p><strong>Solution</strong> : Revenir √† <code>fox-factory</code> en interne, utiliser <code>atlas</code> uniquement dans la doc publique. Le√ßon apprise : <strong>ne jamais renommer un node Proxmox en production</strong>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="probl√®me-2--container-cloudflare-tunnel-perdu">Probl√®me 2 : Container Cloudflare Tunnel perdu<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#probl%C3%A8me-2--container-cloudflare-tunnel-perdu" class="hash-link" aria-label="Direct link to Probl√®me 2 : Container Cloudflare Tunnel perdu" title="Direct link to Probl√®me 2 : Container Cloudflare Tunnel perdu" translate="no">‚Äã</a></h3>
<p>Lors des tentatives de renommage, le disque du container 202 a √©t√© supprim√©. Heureusement, <strong>j'avais un backup</strong> du dossier <code>/etc/cloudflared/</code> !</p>
<p><strong>Solution</strong> : Recr√©er le container from scratch, restaurer la config. 10 minutes et c'√©tait reparti. <strong>Les backups sauvent des vies</strong> ! üíæ</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="probl√®me-3--tailscale-subnet-routing">Probl√®me 3 : Tailscale subnet routing<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#probl%C3%A8me-3--tailscale-subnet-routing" class="hash-link" aria-label="Direct link to Probl√®me 3 : Tailscale subnet routing" title="Direct link to Probl√®me 3 : Tailscale subnet routing" translate="no">‚Äã</a></h3>
<p>J'ai essay√© Tailscale pour l'acc√®s distant. Installation ultra simple, mais le <strong>subnet routing</strong> ne fonctionnait pas : impossible d'acc√©der √† OPNsense (10.0.1.1) depuis mon laptop.</p>
<p><strong>Pourquoi ?</strong> Tailscale donne acc√®s au r√©seau de la machine o√π il est install√© (192.168.1.x), pas aux r√©seaux virtuels internes (10.0.x.x).</p>
<p><strong>Solution</strong> : Passer √† Cloudflare Tunnel qui est con√ßu pour exposer des services internes, pas pour cr√©er un VPN mesh.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="probl√®me-4--certificats-ssl-auto-sign√©s">Probl√®me 4 : Certificats SSL auto-sign√©s<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#probl%C3%A8me-4--certificats-ssl-auto-sign%C3%A9s" class="hash-link" aria-label="Direct link to Probl√®me 4 : Certificats SSL auto-sign√©s" title="Direct link to Probl√®me 4 : Certificats SSL auto-sign√©s" translate="no">‚Äã</a></h3>
<p>Proxmox et OPNsense utilisent des certificats auto-sign√©s. Les navigateurs affichent des warnings.</p>
<p><strong>Solution temporaire</strong> : Accepter le risque (je sais que c'est mon propre serveur).</p>
<p><strong>Solution future</strong> : G√©n√©rer des vrais certificats Let's Encrypt via Cloudflare DNS challenge ou ACME.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-stack-technique-compl√®te">üìä Stack technique compl√®te<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#-stack-technique-compl%C3%A8te" class="hash-link" aria-label="Direct link to üìä Stack technique compl√®te" title="Direct link to üìä Stack technique compl√®te" translate="no">‚Äã</a></h2>
<table><thead><tr><th>Composant</th><th>Technologie</th><th>Version</th></tr></thead><tbody><tr><td>Hyperviseur</td><td>Proxmox VE</td><td>8.x</td></tr><tr><td>Firewall</td><td>OPNsense</td><td>24.7</td></tr><tr><td>Tunnel</td><td>Cloudflare Tunnel</td><td>Latest</td></tr><tr><td>OS Containers</td><td>Ubuntu</td><td>24.04 LTS</td></tr><tr><td>Documentation</td><td>Docusaurus</td><td>3.x</td></tr><tr><td>Hosting Doc</td><td>GitHub Pages</td><td>-</td></tr><tr><td>Domaine</td><td>Cloudflare</td><td>olympus-lab.org</td></tr><tr><td>DNS</td><td>Cloudflare</td><td>1.1.1.1</td></tr></tbody></table>
<p><strong>Co√ªt total</strong> : ~12‚Ç¨/an (juste le domaine, tout le reste est gratuit !)</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-prochaines-√©tapes">üöÄ Prochaines √©tapes<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#-prochaines-%C3%A9tapes" class="hash-link" aria-label="Direct link to üöÄ Prochaines √©tapes" title="Direct link to üöÄ Prochaines √©tapes" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="d√©cembre-2025-chez-mes-parents">D√©cembre 2025 (chez mes parents)<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#d%C3%A9cembre-2025-chez-mes-parents" class="hash-link" aria-label="Direct link to D√©cembre 2025 (chez mes parents)" title="Direct link to D√©cembre 2025 (chez mes parents)" translate="no">‚Äã</a></h3>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Tester l'acc√®s distant en conditions r√©elles</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Commencer Python (Automate the Boring Stuff)</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Continuer Practical Networking (cours en ligne)</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Exp√©rimenter dans le r√©seau DEV</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="janvier-2026-retour-√†-nantes">Janvier 2026 (retour √† Nantes)<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#janvier-2026-retour-%C3%A0-nantes" class="hash-link" aria-label="Direct link to Janvier 2026 (retour √† Nantes)" title="Direct link to Janvier 2026 (retour √† Nantes)" translate="no">‚Äã</a></h3>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->D√©ployer <strong>GitLab CE</strong> en LAN pour le CI/CD</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Installer <strong>Pi-hole</strong> pour le DNS local + blocage pub</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Setup <strong>Prometheus + Grafana</strong> pour le monitoring</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Configurer les <strong>backups automatiques</strong> (Proxmox Backup Server ?)</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="q1-2026">Q1 2026<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#q1-2026" class="hash-link" aria-label="Direct link to Q1 2026" title="Direct link to Q1 2026" translate="no">‚Äã</a></h3>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Apprendre <strong>WireGuard</strong> (dans des VMs de test)</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->D√©ployer un cluster <strong>K3s</strong> en DEV</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Automatiser avec <strong>Ansible</strong> (playbooks pour tout)</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Ajouter un deuxi√®me node Proxmox (si budget)</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="long-terme">Long terme<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#long-terme" class="hash-link" aria-label="Direct link to Long terme" title="Direct link to Long terme" translate="no">‚Äã</a></h3>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Certifications : AWS, Azure, Kubernetes</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Contribuer √† des projets open source</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Documenter et partager mes apprentissages</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-r√©flexions">üí≠ R√©flexions<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#-r%C3%A9flexions" class="hash-link" aria-label="Direct link to üí≠ R√©flexions" title="Direct link to üí≠ R√©flexions" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="ce-que-jai-appris">Ce que j'ai appris<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#ce-que-jai-appris" class="hash-link" aria-label="Direct link to Ce que j'ai appris" title="Direct link to Ce que j'ai appris" translate="no">‚Äã</a></h3>
<p><strong>Networking</strong> : Avant ce projet, les VLANs et la segmentation r√©seau √©taient abstraits. Maintenant, je <strong>comprends</strong> vraiment comment fonctionne un firewall, le NAT, le routing, les ACLs. J'ai cass√© des choses, debugg√© pendant des heures, et c'est comme √ßa qu'on apprend vraiment.</p>
<p><strong>S√©curit√©</strong> : Le principe de <strong>Defense in Depth</strong> n'est pas juste th√©orique. Chaque couche compte. Si j'avais juste fait du port forwarding basique, j'aurais un point d'entr√©e unique. Maintenant, pour atteindre mes services, il faut :</p>
<ol>
<li class="">Passer Cloudflare Edge (DDoS protection)</li>
<li class="">S'authentifier via Access (email + OTP)</li>
<li class="">Traverser le tunnel chiffr√©</li>
<li class="">Passer le firewall OPNsense</li>
<li class="">S'authentifier sur le service final</li>
</ol>
<p><strong>Infrastructure as Code</strong> : Documenter tout dans Docusaurus me force √† comprendre ce que je fais. Si je ne peux pas l'expliquer clairement dans la doc, c'est que je ne le comprends pas vraiment. La doc devient aussi un <strong>backup de ma connaissance</strong>.</p>
<p><strong>√âchecs = Apprentissage</strong> : J'ai cass√© mon infrastructure plusieurs fois. Chaque fois, j'ai appris :</p>
<ul>
<li class="">L'importance des backups</li>
<li class="">Comment d√©bugger m√©thodiquement</li>
<li class="">La valeur de la documentation</li>
<li class="">Qu'il faut tester avant de modifier la prod</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="pourquoi-un-homelab-en-2025-">Pourquoi un homelab en 2025 ?<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#pourquoi-un-homelab-en-2025-" class="hash-link" aria-label="Direct link to Pourquoi un homelab en 2025 ?" title="Direct link to Pourquoi un homelab en 2025 ?" translate="no">‚Äã</a></h3>
<p>Certains diraient : "Pourquoi ne pas juste utiliser AWS ou Azure ?"</p>
<p><strong>Ma r√©ponse</strong> :</p>
<ul>
<li class="">Je veux comprendre <strong>comment √ßa marche en dessous</strong></li>
<li class="">Les clouds abstraient trop de choses</li>
<li class="">Un homelab, c'est <strong>gratuit</strong> (apr√®s l'investissement initial)</li>
<li class="">Je peux casser sans craindre une facture de 500‚Ç¨</li>
<li class="">C'est <strong>mon</strong> labo, mes r√®gles, mes exp√©rimentations</li>
</ul>
<p>En alternance, je travaille sur Oracle Cloud et GitLab. Mais dans mon homelab, je peux tout essayer : k3s, Ansible, Terraform, Prometheus, sans limite.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-pour-les-d√©butants-qui-lisent-√ßa">üéì Pour les d√©butants qui lisent √ßa<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#-pour-les-d%C3%A9butants-qui-lisent-%C3%A7a" class="hash-link" aria-label="Direct link to üéì Pour les d√©butants qui lisent √ßa" title="Direct link to üéì Pour les d√©butants qui lisent √ßa" translate="no">‚Äã</a></h2>
<p>Si tu d√©butes en DevOps et que tu veux cr√©er ton homelab :</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="commence-petit">Commence petit<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#commence-petit" class="hash-link" aria-label="Direct link to Commence petit" title="Direct link to Commence petit" translate="no">‚Äã</a></h3>
<ul>
<li class="">Une seule VM suffit au d√©but</li>
<li class="">Pas besoin de segmentation r√©seau complexe</li>
<li class="">Apprends Proxmox ou VirtualBox d'abord</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="documente-tout">Documente tout<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#documente-tout" class="hash-link" aria-label="Direct link to Documente tout" title="Direct link to Documente tout" translate="no">‚Äã</a></h3>
<ul>
<li class="">Prends des notes</li>
<li class="">Capture des screenshots</li>
<li class="">√âcris les commandes que tu utilises</li>
<li class="">Future toi te remerciera</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="casse-des-choses">Casse des choses<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#casse-des-choses" class="hash-link" aria-label="Direct link to Casse des choses" title="Direct link to Casse des choses" translate="no">‚Äã</a></h3>
<ul>
<li class="">Les erreurs sont tes meilleures profs</li>
<li class="">Fais des snapshots avant de modifier</li>
<li class="">Teste dans un environnement isol√© (DEV)</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="apprends-les-bases">Apprends les bases<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#apprends-les-bases" class="hash-link" aria-label="Direct link to Apprends les bases" title="Direct link to Apprends les bases" translate="no">‚Äã</a></h3>
<ul>
<li class=""><strong>Networking</strong> : Comprends IP, subnets, routing, NAT</li>
<li class=""><strong>Linux</strong> : CLI, permissions, services systemd</li>
<li class=""><strong>Virtualisation</strong> : Concepts de VMs, containers, hyperviseurs</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="s√©curit√©-dabord">S√©curit√© d'abord<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#s%C3%A9curit%C3%A9-dabord" class="hash-link" aria-label="Direct link to S√©curit√© d'abord" title="Direct link to S√©curit√© d'abord" translate="no">‚Äã</a></h3>
<ul>
<li class="">Jamais de port forwarding sans r√©fl√©chir</li>
<li class="">Toujours des mots de passe forts</li>
<li class="">2FA partout o√π c'est possible</li>
<li class="">Backups r√©guliers</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-m√©triques">üìà M√©triques<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#-m%C3%A9triques" class="hash-link" aria-label="Direct link to üìà M√©triques" title="Direct link to üìà M√©triques" translate="no">‚Äã</a></h2>
<p>Depuis le d√©but du projet :</p>
<ul>
<li class=""><strong>Temps investi</strong> : ~40 heures (configuration, debug, doc)</li>
<li class=""><strong>Erreurs commises</strong> : Trop pour compter (c'est √ßa apprendre !)</li>
<li class=""><strong>Services d√©ploy√©s</strong> : 3 (Proxmox, OPNsense, Cloudflare Tunnel)</li>
<li class=""><strong>Lignes de doc</strong> : ~3000 (7 fichiers Markdown)</li>
<li class=""><strong>Commits Git</strong> : 15+</li>
<li class=""><strong>Caf√© consomm√©</strong> : Beaucoup ‚òï</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-nomenclature-mythologique">üå∏ Nomenclature mythologique<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#-nomenclature-mythologique" class="hash-link" aria-label="Direct link to üå∏ Nomenclature mythologique" title="Direct link to üå∏ Nomenclature mythologique" translate="no">‚Äã</a></h2>
<p>Parce que DevOps, c'est aussi s'amuser :</p>
<ul>
<li class=""><strong>Atlas</strong> : Proxmox node (le titan qui porte l'infrastructure)</li>
<li class=""><strong>Olympus</strong> : OPNsense (le mont Olympe, centre de contr√¥le)</li>
<li class=""><strong>Hermes</strong> : Cloudflare Tunnel (le messager des dieux)</li>
</ul>
<p>Prochains services :</p>
<ul>
<li class=""><strong>Hephaestus</strong> : GitLab (la forge de code)</li>
<li class=""><strong>Prometheus</strong> : Monitoring (appropri√© !)</li>
<li class=""><strong>Apollo</strong> : CI/CD pipeline</li>
<li class=""><strong>Artemis</strong> : Backup system</li>
<li class=""><strong>Poseidon</strong> : Storage server</li>
</ul>
<p>Logo : üå∏ Hanami (fleur de cerisier) + üåô Lune = esth√©tique japonaise + mythologie grecque.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-conclusion">üéâ Conclusion<a href="https://docs.olympus-lab.org/blog/olympus-lab-setup#-conclusion" class="hash-link" aria-label="Direct link to üéâ Conclusion" title="Direct link to üéâ Conclusion" translate="no">‚Äã</a></h2>
<p><strong>Olympus Lab est maintenant op√©rationnel</strong> ! Je peux :</p>
<ul>
<li class="">‚úÖ Cr√©er des VMs et containers √† volont√©</li>
<li class="">‚úÖ Exp√©rimenter en toute s√©curit√©</li>
<li class="">‚úÖ Acc√©der depuis n'importe o√π</li>
<li class="">‚úÖ Apprendre en cassant et r√©parant</li>
<li class="">‚úÖ Documenter mes apprentissages</li>
</ul>
<p>La prochaine fois que quelqu'un me demandera "C'est quoi DevOps ?", je pourrai montrer mon homelab et dire : <strong>"C'est √ßa. Et c'est moi qui l'ai construit."</strong> üí™</p>
<p>Rendez-vous dans le prochain article pour le d√©ploiement de GitLab ! üöÄ</p>
<hr>
<p><strong>Stack</strong> : Proxmox VE ‚Ä¢ OPNsense ‚Ä¢ Cloudflare Tunnel ‚Ä¢ Ubuntu 24.04 ‚Ä¢ Docusaurus</p>
<p><strong>Tags</strong> : #DevOps #Homelab #Infrastructure #Networking #Security #Learning</p>
<p><strong>Documentation</strong> : <a href="https://docs.olympus-lab.org/" target="_blank" rel="noopener noreferrer" class="">docs.olympus-lab.org</a></p>]]></content:encoded>
            <category>infrastructure</category>
            <category>proxmox</category>
            <category>opnsense</category>
            <category>cloudflare</category>
            <category>homelab</category>
            <category>devops</category>
        </item>
    </channel>
</rss>