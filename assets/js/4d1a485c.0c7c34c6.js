"use strict";(globalThis.webpackChunkhomelab_docs=globalThis.webpackChunkhomelab_docs||[]).push([[9],{8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>a});var r=s(6540);const i={},l=r.createContext(i);function c(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(l.Provider,{value:n},e.children)}},9505:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>u,frontMatter:()=>c,metadata:()=>r,toc:()=>t});const r=JSON.parse('{"id":"homelab/procedures/maintenance","title":"Maintenance et Backup","description":"Proc\xe9dures de maintenance r\xe9guli\xe8re et strat\xe9gies de backup pour l\'infrastructure Olympus Lab.","source":"@site/docs/homelab/procedures/maintenance.md","sourceDirName":"homelab/procedures","slug":"/homelab/procedures/maintenance","permalink":"/docs/homelab/procedures/maintenance","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/homelab/procedures/maintenance.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"Maintenance"},"sidebar":"tutorialSidebar","previous":{"title":"Acces Remote","permalink":"/docs/homelab/procedures/access-remote"},"next":{"title":"Apprentissage","permalink":"/docs/category/apprentissage"}}');var i=s(4848),l=s(8453);const c={sidebar_position:2,sidebar_label:"Maintenance"},a="Maintenance et Backup",o={},t=[{value:"Vue d&#39;ensemble",id:"vue-densemble",level:2},{value:"Composants critiques \xe0 maintenir",id:"composants-critiques-\xe0-maintenir",level:3},{value:"Philosophie",id:"philosophie",level:3},{value:"Calendrier de maintenance",id:"calendrier-de-maintenance",level:2},{value:"Hebdomadaire",id:"hebdomadaire",level:3},{value:"Mensuel",id:"mensuel",level:3},{value:"Trimestriel",id:"trimestriel",level:3},{value:"Mises \xe0 jour",id:"mises-\xe0-jour",level:2},{value:"Proxmox VE",id:"proxmox-ve",level:3},{value:"V\xe9rification des mises \xe0 jour",id:"v\xe9rification-des-mises-\xe0-jour",level:4},{value:"Mise \xe0 jour",id:"mise-\xe0-jour",level:4},{value:"Via l&#39;interface Web",id:"via-linterface-web",level:4},{value:"OPNsense",id:"opnsense",level:3},{value:"Via l&#39;interface Web",id:"via-linterface-web-1",level:4},{value:"Backup avant update",id:"backup-avant-update",level:4},{value:"Container Cloudflare Tunnel (Hermes)",id:"container-cloudflare-tunnel-hermes",level:3},{value:"Mise \xe0 jour du syst\xe8me",id:"mise-\xe0-jour-du-syst\xe8me",level:4},{value:"Mise \xe0 jour de cloudflared",id:"mise-\xe0-jour-de-cloudflared",level:4},{value:"Strat\xe9gie de backup",id:"strat\xe9gie-de-backup",level:2},{value:"Priorit\xe9s de backup",id:"priorit\xe9s-de-backup",level:3},{value:"Backup OPNsense",id:"backup-opnsense",level:3},{value:"Backup manuel",id:"backup-manuel",level:4},{value:"Backup automatique (\xe0 configurer)",id:"backup-automatique-\xe0-configurer",level:4},{value:"Restauration",id:"restauration",level:4},{value:"Backup Cloudflare Tunnel",id:"backup-cloudflare-tunnel",level:3},{value:"Fichiers critiques",id:"fichiers-critiques",level:4},{value:"Backup manuel",id:"backup-manuel-1",level:4},{value:"Restauration",id:"restauration-1",level:4},{value:"Backup VMs et Containers",id:"backup-vms-et-containers",level:3},{value:"Snapshots manuels",id:"snapshots-manuels",level:4},{value:"Restauration d&#39;un snapshot",id:"restauration-dun-snapshot",level:4},{value:"Backup complet (vzdump)",id:"backup-complet-vzdump",level:4},{value:"Backup automatique avec Proxmox",id:"backup-automatique-avec-proxmox",level:3},{value:"Configurer un job de backup",id:"configurer-un-job-de-backup",level:4},{value:"Monitoring",id:"monitoring",level:2},{value:"V\xe9rifications quotidiennes (automatisable)",id:"v\xe9rifications-quotidiennes-automatisable",level:3},{value:"Espace disque",id:"espace-disque",level:4},{value:"Services critiques",id:"services-critiques",level:4},{value:"Connectivit\xe9 Internet",id:"connectivit\xe9-internet",level:4},{value:"Logs \xe0 surveiller",id:"logs-\xe0-surveiller",level:3},{value:"Cloudflare Access Logs",id:"cloudflare-access-logs",level:4},{value:"OPNsense Firewall Logs",id:"opnsense-firewall-logs",level:4},{value:"Proxmox Logs",id:"proxmox-logs",level:4},{value:"Nettoyage",id:"nettoyage",level:2},{value:"Proxmox",id:"proxmox",level:3},{value:"Nettoyer les anciens kernels",id:"nettoyer-les-anciens-kernels",level:4},{value:"Nettoyer le cache APT",id:"nettoyer-le-cache-apt",level:4},{value:"Supprimer les anciens backups",id:"supprimer-les-anciens-backups",level:4},{value:"OPNsense",id:"opnsense-1",level:3},{value:"Supprimer les anciens backups config",id:"supprimer-les-anciens-backups-config",level:4},{value:"Nettoyer les logs",id:"nettoyer-les-logs",level:4},{value:"Proc\xe9dures d&#39;urgence",id:"proc\xe9dures-durgence",level:2},{value:"OPNsense ne r\xe9pond plus",id:"opnsense-ne-r\xe9pond-plus",level:3},{value:"Sympt\xf4mes",id:"sympt\xf4mes",level:4},{value:"Solution",id:"solution",level:4},{value:"Cloudflare Tunnel down",id:"cloudflare-tunnel-down",level:3},{value:"Sympt\xf4mes",id:"sympt\xf4mes-1",level:4},{value:"Solution",id:"solution-1",level:4},{value:"Proxmox ne d\xe9marre plus",id:"proxmox-ne-d\xe9marre-plus",level:3},{value:"Solution",id:"solution-2",level:4},{value:"Documentation continue",id:"documentation-continue",level:2},{value:"Apr\xe8s chaque modification",id:"apr\xe8s-chaque-modification",level:3},{value:"Template de note de modification",id:"template-de-note-de-modification",level:3},{value:"Checklist de maintenance mensuelle",id:"checklist-de-maintenance-mensuelle",level:2},{value:"Outils recommand\xe9s",id:"outils-recommand\xe9s",level:2},{value:"Monitoring (\xe0 d\xe9ployer plus tard)",id:"monitoring-\xe0-d\xe9ployer-plus-tard",level:3},{value:"Backup",id:"backup",level:3},{value:"Documentation",id:"documentation",level:3},{value:"Ressources",id:"ressources",level:2},{value:"R\xe8gle 3-2-1 pour les backups",id:"r\xe8gle-3-2-1-pour-les-backups",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"maintenance-et-backup",children:"Maintenance et Backup"})}),"\n",(0,i.jsx)(n.p,{children:"Proc\xe9dures de maintenance r\xe9guli\xe8re et strat\xe9gies de backup pour l'infrastructure Olympus Lab."}),"\n",(0,i.jsx)(n.h2,{id:"vue-densemble",children:"Vue d'ensemble"}),"\n",(0,i.jsx)(n.h3,{id:"composants-critiques-\xe0-maintenir",children:"Composants critiques \xe0 maintenir"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Proxmox VE"})," (fox-factory)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"OPNsense"})," (Olympus - VM 100)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cloudflare Tunnel"})," (Hermes - CT 202)"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Configurations firewall"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Documentation"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"philosophie",children:"Philosophie"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Pr\xe9vention"})," : Mises \xe0 jour r\xe9guli\xe8res pour \xe9viter les failles de s\xe9curit\xe9"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Backup"})," : Toujours avoir un plan B"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Documentation"})," : Chaque modification est document\xe9e"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Testing"})," : Tester avant de d\xe9ployer en production"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"calendrier-de-maintenance",children:"Calendrier de maintenance"}),"\n",(0,i.jsx)(n.h3,{id:"hebdomadaire",children:"Hebdomadaire"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Dimanche soir (ou moment calme)"})," :"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 V\xe9rifier l'\xe9tat des services (Proxmox, OPNsense, Tunnel)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Consulter les logs Cloudflare Access"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 V\xe9rifier l'espace disque"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Temps estim\xe9"})," : 10-15 minutes"]}),"\n",(0,i.jsx)(n.h3,{id:"mensuel",children:"Mensuel"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Premier dimanche du mois"})," :"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Mettre \xe0 jour Proxmox"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Mettre \xe0 jour OPNsense"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Mettre \xe0 jour le container Cloudflare Tunnel"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Backup des configurations"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 V\xe9rifier les r\xe8gles firewall (supprimer l'inutile)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Tester les acc\xe8s distants"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Temps estim\xe9"})," : 1-2 heures"]}),"\n",(0,i.jsx)(n.h3,{id:"trimestriel",children:"Trimestriel"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"D\xe9but de chaque trimestre"})," :"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Audit de s\xe9curit\xe9 complet"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Review des logs sur 3 mois"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Mettre \xe0 jour la documentation"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Tester la restauration des backups"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Planifier les \xe9volutions (nouvelles VMs, services)"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Temps estim\xe9"})," : 2-3 heures"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"mises-\xe0-jour",children:"Mises \xe0 jour"}),"\n",(0,i.jsx)(n.h3,{id:"proxmox-ve",children:"Proxmox VE"}),"\n",(0,i.jsx)(n.h4,{id:"v\xe9rification-des-mises-\xe0-jour",children:"V\xe9rification des mises \xe0 jour"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# SSH vers Proxmox\nssh root@192.168.1.51\n\n# V\xe9rifier les updates disponibles\napt update\napt list --upgradable\n"})}),"\n",(0,i.jsx)(n.h4,{id:"mise-\xe0-jour",children:"Mise \xe0 jour"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Mettre \xe0 jour les packages\napt update\napt dist-upgrade -y\n\n# Si le kernel est mis \xe0 jour, red\xe9marrer\nreboot\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Apr\xe8s reboot"})," :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# V\xe9rifier la version\npveversion\n\n# V\xe9rifier que tout fonctionne\npct list\nqm list\n"})}),"\n",(0,i.jsx)(n.h4,{id:"via-linterface-web",children:"Via l'interface Web"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://proxmox.olympus-lab.org",children:"https://proxmox.olympus-lab.org"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Node (fox-factory)"})," \u2192 ",(0,i.jsx)(n.strong,{children:"Updates"})]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Refresh"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Upgrade"})," (si updates disponibles)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reboot"})," si n\xe9cessaire"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Fr\xe9quence"})," : Mensuel"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"opnsense",children:"OPNsense"}),"\n",(0,i.jsx)(n.h4,{id:"via-linterface-web-1",children:"Via l'interface Web"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://opnsense.olympus-lab.org",children:"https://opnsense.olympus-lab.org"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"System"})," \u2192 ",(0,i.jsx)(n.strong,{children:"Firmware"})," \u2192 ",(0,i.jsx)(n.strong,{children:"Status"})]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Check for updates"})}),"\n",(0,i.jsxs)(n.li,{children:["Si updates disponibles :","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Download"})," \u2192 Attendre"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Install"})," \u2192 Confirmer"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reboot"})," automatique apr\xe8s installation"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Dur\xe9e"})," : 5-10 minutes (le firewall red\xe9marre)"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u26a0\ufe0f Important"})," : Pr\xe9voir une fen\xeatre de maintenance car ",(0,i.jsx)(n.strong,{children:"tout l'acc\xe8s Internet est coup\xe9 pendant le reboot"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Fr\xe9quence"})," : Mensuel"]}),"\n",(0,i.jsx)(n.h4,{id:"backup-avant-update",children:"Backup avant update"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"TOUJOURS"})," faire un backup avant une mise \xe0 jour OPNsense :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"System \u2192 Configuration \u2192 Backups \u2192 Download configuration\n"})}),"\n",(0,i.jsx)(n.p,{children:"Sauvegarder le fichier XML localement."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"container-cloudflare-tunnel-hermes",children:"Container Cloudflare Tunnel (Hermes)"}),"\n",(0,i.jsx)(n.h4,{id:"mise-\xe0-jour-du-syst\xe8me",children:"Mise \xe0 jour du syst\xe8me"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Entrer dans le container\npct enter 202\n\n# Mettre \xe0 jour Ubuntu\napt update && apt upgrade -y\n\n# Sortir\nexit\n"})}),"\n",(0,i.jsx)(n.h4,{id:"mise-\xe0-jour-de-cloudflared",children:"Mise \xe0 jour de cloudflared"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Entrer dans le container\npct enter 202\n\n# T\xe9l\xe9charger la derni\xe8re version\ncurl -L https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64 -o /tmp/cloudflared\n\n# Remplacer l'ancien\nmv /tmp/cloudflared /usr/local/bin/cloudflared\nchmod +x /usr/local/bin/cloudflared\n\n# V\xe9rifier la version\ncloudflared --version\n\n# Red\xe9marrer le service\nsystemctl restart cloudflared\n\n# V\xe9rifier que tout fonctionne\nsystemctl status cloudflared\njournalctl -u cloudflared -n 20\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Statut attendu"})," : 4 connexions \xe9tablies \u2705"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Fr\xe9quence"})," : Mensuel"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"strat\xe9gie-de-backup",children:"Strat\xe9gie de backup"}),"\n",(0,i.jsx)(n.h3,{id:"priorit\xe9s-de-backup",children:"Priorit\xe9s de backup"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Critique (journalier recommand\xe9)"})," :"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Configuration OPNsense"}),"\n",(0,i.jsx)(n.li,{children:"Configuration Cloudflare Tunnel"}),"\n",(0,i.jsx)(n.li,{children:"Snapshots des VMs critiques"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Important (hebdomadaire)"})," :\n4. Containers LXC\n5. Configuration Proxmox"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Optionnel (mensuel)"})," :\n6. VMs de d\xe9veloppement/test"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"backup-opnsense",children:"Backup OPNsense"}),"\n",(0,i.jsx)(n.h4,{id:"backup-manuel",children:"Backup manuel"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Via l'interface Web"})," :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"System \u2192 Configuration \u2192 Backups \u2192 Download configuration\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Fichier"})," : ",(0,i.jsx)(n.code,{children:"config-fox-factory.localdomain-YYYYMMDD.xml"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Sauvegarde"})," : Sur ton PC dans un dossier d\xe9di\xe9"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"C:\\Backups\\olympus-lab\\opnsense\\\n"})}),"\n",(0,i.jsx)(n.h4,{id:"backup-automatique-\xe0-configurer",children:"Backup automatique (\xe0 configurer)"}),"\n",(0,i.jsx)(n.p,{children:"OPNsense peut envoyer des backups automatiques :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"System \u2192 Configuration \u2192 Backups \u2192 Enable automatic backup\nDestination: Email, FTP, etc.\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Fr\xe9quence recommand\xe9e"})," : Hebdomadaire"]}),"\n",(0,i.jsx)(n.h4,{id:"restauration",children:"Restauration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"System \u2192 Configuration \u2192 Backups\n    \u2193\nChoose file (XML)\n    \u2193\nRestore configuration\n    \u2193\nReboot\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"backup-cloudflare-tunnel",children:"Backup Cloudflare Tunnel"}),"\n",(0,i.jsx)(n.h4,{id:"fichiers-critiques",children:"Fichiers critiques"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"/etc/cloudflared/config.yml\n/etc/cloudflared/f7fedba1-6be1-4408-a755-e9badd33f9a0.json\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u26a0\ufe0f Le fichier .json est CRITIQUE"})," : Sans lui, impossible de reconnecter le tunnel !"]}),"\n",(0,i.jsx)(n.h4,{id:"backup-manuel-1",children:"Backup manuel"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Depuis Proxmox\npct exec 202 -- tar czf /tmp/cloudflared-backup.tar.gz /etc/cloudflared\n\n# T\xe9l\xe9charger sur ton PC\npct pull 202 /tmp/cloudflared-backup.tar.gz ~/cloudflared-backup-$(date +%Y%m%d).tar.gz\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Sauvegarde"})," : Sur ton PC + cloud (Google Drive, Dropbox)"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"C:\\Backups\\olympus-lab\\cloudflared\\\n"})}),"\n",(0,i.jsx)(n.h4,{id:"restauration-1",children:"Restauration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Uploader le backup\npct push 202 ~/cloudflared-backup-YYYYMMDD.tar.gz /tmp/cloudflared-backup.tar.gz\n\n# Extraire\npct exec 202 -- tar xzf /tmp/cloudflared-backup.tar.gz -C /\n\n# Red\xe9marrer le service\npct exec 202 -- systemctl restart cloudflared\n\n# V\xe9rifier\npct exec 202 -- systemctl status cloudflared\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Fr\xe9quence recommand\xe9e"})," : Apr\xe8s chaque modification de la config"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"backup-vms-et-containers",children:"Backup VMs et Containers"}),"\n",(0,i.jsx)(n.h4,{id:"snapshots-manuels",children:"Snapshots manuels"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Avant une modification importante"})," :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Snapshot d\'une VM\nqm snapshot 100 pre-update-$(date +%Y%m%d) --description "Avant mise \xe0 jour OPNsense"\n\n# Snapshot d\'un container\npct snapshot 202 pre-config-change-$(date +%Y%m%d) --description "Avant modif config tunnel"\n'})}),"\n",(0,i.jsx)(n.h4,{id:"restauration-dun-snapshot",children:"Restauration d'un snapshot"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Lister les snapshots\nqm listsnapshot 100\n\n# Restaurer\nqm rollback 100 nom-du-snapshot\n\n# Pour container\npct listsnapshot 202\npct rollback 202 nom-du-snapshot\n"})}),"\n",(0,i.jsx)(n.h4,{id:"backup-complet-vzdump",children:"Backup complet (vzdump)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Backup d'une VM"})," :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Backup de OPNsense\nvzdump 100 --compress zstd --mode snapshot --storage local\n\n# Fichier cr\xe9\xe9 dans /var/lib/vz/dump/\n# vzdump-qemu-100-YYYY_MM_DD-HH_MM_SS.vma.zst\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Backup d'un container"})," :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Backup du container Cloudflare\nvzdump 202 --compress zstd --mode snapshot --storage local\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"T\xe9l\xe9charger le backup"})," :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Sur ton PC\nscp root@192.168.1.51:/var/lib/vz/dump/vzdump-*.zst ~/Backups/olympus-lab/\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Restauration"})," :"]}),"\n",(0,i.jsx)(n.p,{children:"Via l'interface Web Proxmox :"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Datacenter"})," \u2192 ",(0,i.jsx)(n.strong,{children:"Storage (local)"})," \u2192 ",(0,i.jsx)(n.strong,{children:"Backups"})]}),"\n",(0,i.jsx)(n.li,{children:"S\xe9lectionner le backup"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Restore"})}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"backup-automatique-avec-proxmox",children:"Backup automatique avec Proxmox"}),"\n",(0,i.jsx)(n.h4,{id:"configurer-un-job-de-backup",children:"Configurer un job de backup"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Via l'interface Web"})," :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Datacenter \u2192 Backup \u2192 Add\n    \u2193\nSchedule: Daily at 2:00 AM\nSelection Mode: Include selected VMs\nVMs: 100 (OPNsense), 202 (Hermes)\nStorage: local\nCompression: ZSTD\nMode: Snapshot\nEmail notification: [ton email]\n    \u2193\nCreate\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"R\xe9sultat"})," : Backup automatique tous les jours \xe0 2h du matin."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"R\xe9tention"})," : Configurer la r\xe9tention (ex: garder 7 derniers backups)"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"monitoring",children:"Monitoring"}),"\n",(0,i.jsx)(n.h3,{id:"v\xe9rifications-quotidiennes-automatisable",children:"V\xe9rifications quotidiennes (automatisable)"}),"\n",(0,i.jsx)(n.h4,{id:"espace-disque",children:"Espace disque"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Sur Proxmox\ndf -h\n\n# V\xe9rifier que / et /var/lib/vz ne sont pas pleins\n# Alerte si > 80%\n"})}),"\n",(0,i.jsx)(n.h4,{id:"services-critiques",children:"Services critiques"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Statut OPNsense\nqm status 100\n# Doit \xeatre "running"\n\n# Statut Cloudflare Tunnel\npct status 202\npct exec 202 -- systemctl status cloudflared\n# Doit \xeatre "active (running)"\n'})}),"\n",(0,i.jsx)(n.h4,{id:"connectivit\xe9-internet",children:"Connectivit\xe9 Internet"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Depuis Proxmox\nping -c 3 1.1.1.1\n\n# Depuis un container en LAN\npct enter 200\nping -c 3 google.com\nexit\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"logs-\xe0-surveiller",children:"Logs \xe0 surveiller"}),"\n",(0,i.jsx)(n.h4,{id:"cloudflare-access-logs",children:"Cloudflare Access Logs"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Dashboard"})," : ",(0,i.jsx)(n.a,{href:"https://one.dash.cloudflare.com/",children:"https://one.dash.cloudflare.com/"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Logs \u2192 Access\n    \u2193\nVoir :\n- Tentatives de connexion refus\xe9es (suspicious ?)\n- Patterns d'acc\xe8s inhabituels\n- Acc\xe8s depuis des pays inattendus\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Alertes \xe0 configurer"})," :"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Email si > 5 tentatives refus\xe9es en 1h"}),"\n",(0,i.jsx)(n.li,{children:"Email si acc\xe8s depuis un nouveau pays"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"opnsense-firewall-logs",children:"OPNsense Firewall Logs"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Via l'interface Web"})," :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'Firewall \u2192 Log Files \u2192 Live View\n    \u2193\nFiltrer sur "Block"\n    \u2193\nIdentifier les patterns suspects :\n- Port scanning (nombreux ports diff\xe9rents)\n- Brute force SSH (nombreuses tentatives port 22)\n- Acc\xe8s depuis IP suspectes\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Action"})," : Cr\xe9er des r\xe8gles de blocage si n\xe9cessaire"]}),"\n",(0,i.jsx)(n.h4,{id:"proxmox-logs",children:"Proxmox Logs"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Logs syst\xe8me\njournalctl -xe\n\n# Logs des VMs\nqm showcmd 100\n\n# Logs des containers\npct exec 202 -- journalctl -n 50\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"nettoyage",children:"Nettoyage"}),"\n",(0,i.jsx)(n.h3,{id:"proxmox",children:"Proxmox"}),"\n",(0,i.jsx)(n.h4,{id:"nettoyer-les-anciens-kernels",children:"Nettoyer les anciens kernels"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Lister les kernels install\xe9s\ndpkg --list | grep linux-image\n\n# Supprimer les anciens (garder le current + 1)\napt autoremove -y\n"})}),"\n",(0,i.jsx)(n.h4,{id:"nettoyer-le-cache-apt",children:"Nettoyer le cache APT"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"apt clean\napt autoclean\n"})}),"\n",(0,i.jsx)(n.h4,{id:"supprimer-les-anciens-backups",children:"Supprimer les anciens backups"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Lister\nls -lh /var/lib/vz/dump/\n\n# Supprimer manuellement les plus vieux\nrm /var/lib/vz/dump/vzdump-qemu-100-OLD_DATE.vma.zst\n"})}),"\n",(0,i.jsx)(n.p,{children:"Ou configurer la r\xe9tention automatique dans le job de backup."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"opnsense-1",children:"OPNsense"}),"\n",(0,i.jsx)(n.h4,{id:"supprimer-les-anciens-backups-config",children:"Supprimer les anciens backups config"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"System \u2192 Configuration \u2192 Backups\n    \u2193\nListe des backups automatiques\n    \u2193\nSupprimer les plus anciens (garder les 10 derniers)\n"})}),"\n",(0,i.jsx)(n.h4,{id:"nettoyer-les-logs",children:"Nettoyer les logs"}),"\n",(0,i.jsx)(n.p,{children:"Les logs sont automatiquement rotat\xe9s par OPNsense."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Optionnel"})," : R\xe9duire la r\xe9tention si l'espace disque est limit\xe9"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"System \u2192 Settings \u2192 Logging \u2192 Keep logs: 7 days\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"proc\xe9dures-durgence",children:"Proc\xe9dures d'urgence"}),"\n",(0,i.jsx)(n.h3,{id:"opnsense-ne-r\xe9pond-plus",children:"OPNsense ne r\xe9pond plus"}),"\n",(0,i.jsx)(n.h4,{id:"sympt\xf4mes",children:"Sympt\xf4mes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Pas d'acc\xe8s Internet depuis les VMs"}),"\n",(0,i.jsx)(n.li,{children:"Interface Web inaccessible"}),"\n",(0,i.jsx)(n.li,{children:"Pas de r\xe9ponse ping sur 10.0.1.1"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"solution",children:"Solution"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Via console Proxmox"})," :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# V\xe9rifier le statut\nqm status 100\n\n# Si stopped, d\xe9marrer\nqm start 100\n\n# Si running mais ne r\xe9pond pas, red\xe9marrer\nqm reboot 100\n\n# En dernier recours, forcer l'arr\xeat\nqm stop 100\nqm start 100\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Apr\xe8s red\xe9marrage"})," :"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Attendre 2-3 minutes (OPNsense boot complet)"}),"\n",(0,i.jsxs)(n.li,{children:["Tester : ",(0,i.jsx)(n.code,{children:"ping 10.0.1.1"})]}),"\n",(0,i.jsx)(n.li,{children:"V\xe9rifier l'interface Web"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Si \xe7a ne fonctionne toujours pas"})," : Restaurer depuis backup"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"cloudflare-tunnel-down",children:"Cloudflare Tunnel down"}),"\n",(0,i.jsx)(n.h4,{id:"sympt\xf4mes-1",children:"Sympt\xf4mes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Erreur 1033 sur proxmox.olympus-lab.org"}),"\n",(0,i.jsx)(n.li,{children:"Pas d'acc\xe8s aux services"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"solution-1",children:"Solution"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# V\xe9rifier le container\npct status 202\n\n# D\xe9marrer si arr\xeat\xe9\npct start 202\n\n# V\xe9rifier le service\npct exec 202 -- systemctl status cloudflared\n\n# Red\xe9marrer le service\npct exec 202 -- systemctl restart cloudflared\n\n# Voir les logs\npct exec 202 -- journalctl -u cloudflared -f\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Si erreurs dans les logs"})," :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# V\xe9rifier la config\npct exec 202 -- cat /etc/cloudflared/config.yml\n\n# Tester manuellement\npct exec 202 -- cloudflared tunnel run opnsense-access\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"proxmox-ne-d\xe9marre-plus",children:"Proxmox ne d\xe9marre plus"}),"\n",(0,i.jsx)(n.h4,{id:"solution-2",children:"Solution"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Acc\xe8s physique"})," \xe0 la machine (ThinkCentre M710S)"]}),"\n",(0,i.jsx)(n.li,{children:"Brancher un \xe9cran + clavier"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Boot depuis USB"})," (cl\xe9 de rescue)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Monter les disques"})," et r\xe9cup\xe9rer les configs"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"R\xe9installer Proxmox"})," si n\xe9cessaire"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Restaurer depuis backups"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Pr\xe9vention"})," : Avoir une cl\xe9 USB bootable Proxmox pr\xeate"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"documentation-continue",children:"Documentation continue"}),"\n",(0,i.jsx)(n.h3,{id:"apr\xe8s-chaque-modification",children:"Apr\xe8s chaque modification"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Mettre \xe0 jour la documentation Docusaurus"})," :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:'# Sur ton PC\ncd C:\\Docu\n\n# \xc9diter les fichiers concern\xe9s\ncode docs\\infrastructure\\...\n\n# Commit et push\ngit add .\ngit commit -m "Update: description de la modification"\ngit push\n\n# D\xe9ploiement automatique via GitHub Actions\n# https://docs.olympus-lab.org sera mis \xe0 jour automatiquement\n'})}),"\n",(0,i.jsx)(n.h3,{id:"template-de-note-de-modification",children:"Template de note de modification"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-markdown",children:"## [Date] - Titre de la modification\n\n**Quoi** : Description de ce qui a \xe9t\xe9 fait\n\n**Pourquoi** : Raison de la modification\n\n**Impact** : Downtime ? Services affect\xe9s ?\n\n**Rollback** : Comment revenir en arri\xe8re si probl\xe8me\n\n**Valid\xe9 par** : Test effectu\xe9 pour confirmer que \xe7a marche\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"checklist-de-maintenance-mensuelle",children:"Checklist de maintenance mensuelle"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-markdown",children:"## Maintenance [Mois YYYY]\n\n### Avant de commencer\n- [ ] V\xe9rifier que c'est un moment calme (pas d'utilisation critique)\n- [ ] Pr\xe9venir si d'autres utilisent le homelab\n- [ ] Avoir les backups \xe0 jour\n\n### Proxmox\n- [ ] SSH vers Proxmox : `ssh root@192.168.1.51`\n- [ ] `apt update && apt dist-upgrade -y`\n- [ ] `reboot` si kernel mis \xe0 jour\n- [ ] V\xe9rifier post-reboot : `pct list`, `qm list`\n- [ ] Nettoyer : `apt autoremove -y && apt clean`\n\n### OPNsense\n- [ ] https://opnsense.olympus-lab.org\n- [ ] System \u2192 Configuration \u2192 Backups \u2192 Download\n- [ ] System \u2192 Firmware \u2192 Check for updates\n- [ ] Installer si disponible\n- [ ] Tester apr\xe8s reboot : ping, acc\xe8s web, firewall rules\n\n### Cloudflare Tunnel\n- [ ] `pct enter 202`\n- [ ] `apt update && apt upgrade -y`\n- [ ] Mettre \xe0 jour cloudflared (voir proc\xe9dure ci-dessus)\n- [ ] `systemctl restart cloudflared`\n- [ ] V\xe9rifier : `systemctl status cloudflared`\n- [ ] `exit`\n\n### Backups\n- [ ] Backup OPNsense t\xe9l\xe9charg\xe9 et sauvegard\xe9\n- [ ] Backup Cloudflare Tunnel : `pct exec 202 -- tar czf /tmp/cf-backup.tar.gz /etc/cloudflared`\n- [ ] Snapshots des VMs : `qm snapshot 100 monthly-YYYYMM`\n\n### V\xe9rifications\n- [ ] Acc\xe8s web : https://proxmox.olympus-lab.org \u2705\n- [ ] Acc\xe8s web : https://opnsense.olympus-lab.org \u2705\n- [ ] SSH : `ssh ssh-proxmox` \u2705\n- [ ] Internet depuis VM LAN : `pct enter 200 && ping 1.1.1.1` \u2705\n- [ ] Logs Cloudflare : Pas d'alertes suspectes \u2705\n\n### Documentation\n- [ ] Mettre \xe0 jour la doc si modifications\n- [ ] Commit + push vers GitHub\n- [ ] V\xe9rifier https://docs.olympus-lab.org\n\n### Notes\n[Ajouter ici les observations, probl\xe8mes rencontr\xe9s, etc.]\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"outils-recommand\xe9s",children:"Outils recommand\xe9s"}),"\n",(0,i.jsx)(n.h3,{id:"monitoring-\xe0-d\xe9ployer-plus-tard",children:"Monitoring (\xe0 d\xe9ployer plus tard)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Uptime Kuma"})," : Monitoring simple des services"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Grafana + Prometheus"})," : M\xe9triques d\xe9taill\xe9es"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Netdata"})," : Monitoring temps r\xe9el"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"backup",children:"Backup"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Proxmox Backup Server"})," (PBS) : Solution officielle Proxmox"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Restic"})," : Backups chiffr\xe9s vers cloud"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Rclone"})," : Sync vers Google Drive, Dropbox, etc."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"documentation",children:"Documentation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"Docusaurus"})," (d\xe9j\xe0 en place)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Draw.io"})," : Diagrammes r\xe9seau"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Obsidian"})," : Notes personnelles markdown"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"ressources",children:"Ressources"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Proxmox Best Practices"})," : ",(0,i.jsx)(n.a,{href:"https://pve.proxmox.com/wiki/Storage",children:"https://pve.proxmox.com/wiki/Storage"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"OPNsense Docs"})," : ",(0,i.jsx)(n.a,{href:"https://docs.opnsense.org/",children:"https://docs.opnsense.org/"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cloudflare Status"})," : ",(0,i.jsx)(n.a,{href:"https://www.cloudflarestatus.com/",children:"https://www.cloudflarestatus.com/"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Backup Strategy Guide"})," : ",(0,i.jsx)(n.a,{href:"https://www.backblaze.com/blog/the-3-2-1-backup-strategy/",children:"https://www.backblaze.com/blog/the-3-2-1-backup-strategy/"})]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"r\xe8gle-3-2-1-pour-les-backups",children:"R\xe8gle 3-2-1 pour les backups"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"3"})," copies de tes donn\xe9es :"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"1x Production (sur Proxmox)"}),"\n",(0,i.jsx)(n.li,{children:"1x Backup local (snapshots Proxmox)"}),"\n",(0,i.jsx)(n.li,{children:"1x Backup distant (cloud)"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"2"})," types de m\xe9dia diff\xe9rents :"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Disque dur local"}),"\n",(0,i.jsx)(n.li,{children:"Cloud storage"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"1"})," copie off-site :"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Google Drive, Dropbox, ou autre cloud"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Appliquer \xe0"})," :"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Configuration OPNsense (critique)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Configuration Cloudflare Tunnel (critique)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Documentation (GitHub + local)"}),"\n",(0,i.jsx)(n.li,{children:"\u26a0\ufe0f VMs compl\xe8tes (si espace suffisant)"}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);