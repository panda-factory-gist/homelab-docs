"use strict";(globalThis.webpackChunkhomelab_docs=globalThis.webpackChunkhomelab_docs||[]).push([[8130],{7735:e=>{e.exports=JSON.parse('{"archive":{"blogPosts":[{"id":"olympus-lab-setup","metadata":{"permalink":"/blog/olympus-lab-setup","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2025/12-01-olympus-lab-setup.md","source":"@site/blog/2025/12-01-olympus-lab-setup.md","title":"\ud83c\udfdb\ufe0f Olympus Lab - Infrastructure compl\xe8te op\xe9rationnelle","description":"Aujourd\'hui marque l\'ach\xe8vement de l\'infrastructure Olympus Lab, mon homelab DevOps personnel. Apr\xe8s plusieurs semaines de travail, j\'ai enfin une plateforme compl\xe8te pour apprendre et exp\xe9rimenter en toute s\xe9curit\xe9.","date":"2025-12-01T13:00:00.000Z","tags":[{"inline":true,"label":"infrastructure","permalink":"/blog/tags/infrastructure"},{"inline":true,"label":"proxmox","permalink":"/blog/tags/proxmox"},{"inline":true,"label":"opnsense","permalink":"/blog/tags/opnsense"},{"inline":true,"label":"cloudflare","permalink":"/blog/tags/cloudflare"},{"inline":true,"label":"homelab","permalink":"/blog/tags/homelab"},{"inline":true,"label":"devops","permalink":"/blog/tags/devops"}],"readingTime":8.31,"hasTruncateMarker":true,"authors":[{"name":"N\xe9lia","title":"DevOps Student @ ESGI | Alternance ARPEGE","url":"https://github.com/panda-factory-gist","socials":{"github":"https://github.com/panda-factory-gist"},"imageURL":"https://github.com/panda-factory-gist.png","key":"nelia","page":null}],"frontMatter":{"slug":"olympus-lab-setup","title":"\ud83c\udfdb\ufe0f Olympus Lab - Infrastructure compl\xe8te op\xe9rationnelle","authors":"nelia","tags":["infrastructure","proxmox","opnsense","cloudflare","homelab","devops"],"date":"2025-12-01T13:00:00.000Z"},"unlisted":false},"content":"Aujourd\'hui marque l\'ach\xe8vement de l\'infrastructure **Olympus Lab**, mon homelab DevOps personnel. Apr\xe8s plusieurs semaines de travail, j\'ai enfin une plateforme compl\xe8te pour apprendre et exp\xe9rimenter en toute s\xe9curit\xe9.\\n\\n\\n\x3c!--truncate--\x3e\\n\\n## \ud83c\udfaf Le contexte\\n\\nJe suis actuellement en alternance chez ARPEGE \xe0 Nantes en tant qu\'\xe9tudiante DevOps (TSSR \xe0 l\'ESGI). Mon apprentissage se concentre sur :\\n- Ansible pour l\'automatisation\\n- GitLab CI/CD pour les pipelines\\n- Docker & Kubernetes pour la conteneurisation\\n- Oracle Cloud Infrastructure pour le d\xe9ploiement\\n\\nMais pour vraiment ma\xeetriser ces technologies, j\'avais besoin d\'un environnement o\xf9 je peux **casser, reconstruire, exp\xe9rimenter** sans limites. D\'o\xf9 **Olympus Lab** ! \ud83c\udfdb\ufe0f\\n\\n## \ud83c\udfd7\ufe0f Architecture finale\\n\\n### Le setup physique\\n\\n**Machine** : Lenovo ThinkCentre M710S\\n- CPU : Intel i5 (suffisant pour commencer)\\n- RAM : 16 GB (\xe0 upgrader plus tard)\\n- Stockage : SSD pour l\'OS, HDD pour les VMs\\n- R\xe9seau : 1 Gbps vers la box Internet\\n\\n### Les composants logiciels\\n\\n#### 1. **Proxmox VE** (Atlas dans ma nomenclature)\\n\\nL\'hyperviseur qui fait tourner tout le reste. J\'ai configur\xe9 5 bridges r\xe9seau :\\n- `vmbr0` : WAN (192.168.1.0/24) - Connexion Internet\\n- `vmbr1` : LAN (10.0.1.0/24) - Production\\n- `vmbr2` : DMZ (10.0.2.0/24) - Services expos\xe9s\\n- `vmbr3` : DEV (10.0.3.0/24) - Environnement de test\\n- `vmbr4` : MGMT (10.0.4.0/24) - Administration\\n\\n#### 2. **OPNsense** (Olympus - VM 100)\\n\\nLe firewall FreeBSD qui g\xe8re toute la segmentation r\xe9seau. Configuration :\\n- 5 interfaces r\xe9seau (1 par bridge)\\n- R\xe8gles firewall strictes avec isolation compl\xe8te\\n- DHCP sur chaque r\xe9seau\\n- DNS forwarding vers Cloudflare (1.1.1.1)\\n\\n#### 3. **Cloudflare Tunnel** (Hermes - Container 202)\\n\\nLe messager qui me permet d\'acc\xe9der \xe0 mon homelab depuis n\'importe o\xf9. Ubuntu 24.04 LXC avec `cloudflared` :\\n- 256 MB RAM (ultra l\xe9ger)\\n- Tunnel chiffr\xe9 vers Cloudflare Edge\\n- Z\xe9ro port ouvert sur ma box Internet\\n- Authentification Zero Trust avec Cloudflare Access\\n\\n## \ud83c\udf10 Segmentation r\xe9seau\\n\\nLe point le plus important : **l\'isolation des r\xe9seaux**.\\n```\\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\\n\u2502              Internet                        \u2502\\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\\n                   \u2502 WAN (192.168.1.0/24)\\n            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510\\n            \u2502  OPNsense   \u2502 \u2190 Firewall central\\n            \u2502  (Olympus)  \u2502\\n            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\\n       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\\n       \u2502           \u2502           \u2502         \u2502\\n   \u250c\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u25bc\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u25bc\u2500\u2500\u2510  \u250c\u2500\u2500\u25bc\u2500\u2500\u2500\u2510\\n   \u2502  LAN  \u2502   \u2502 DMZ \u2502    \u2502 DEV  \u2502  \u2502 MGMT \u2502\\n   \u2502 Prod  \u2502   \u2502 Web \u2502    \u2502 Test \u2502  \u2502Admin \u2502\\n   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2518\\n```\\n\\n### Les r\xe8gles qui changent tout\\n\\n**LAN** (Production) :\\n- \u2705 Acc\xe8s Internet\\n- \u2705 Communication interne au LAN\\n- \u274c Acc\xe8s aux autres r\xe9seaux (DMZ, DEV, MGMT)\\n\\n**DMZ** (Services expos\xe9s) :\\n- \u2705 Acc\xe8s Internet uniquement\\n- \u274c **Aucun acc\xe8s** aux r\xe9seaux internes\\n\\n**DEV** (D\xe9veloppement) :\\n- \u2705 Acc\xe8s Internet uniquement\\n- \u274c **Aucun acc\xe8s** aux r\xe9seaux internes\\n\\n**MGMT** (Administration) :\\n- \u2705 **Acc\xe8s partout** (pour g\xe9rer l\'infrastructure)\\n\\n**Pourquoi c\'est important ?** Si je fais une erreur en DEV ou si un service en DMZ est compromis, l\'attaquant ne peut **pas** rebondir vers la production. C\'est le principe de **Defense in Depth**.\\n\\n## \ud83d\udd12 S\xe9curit\xe9 multi-couches\\n\\n### Couche 1 : Cloudflare Edge\\n- Protection DDoS automatique\\n- WAF (Web Application Firewall)\\n- Filtrage g\xe9ographique possible\\n\\n### Couche 2 : Cloudflare Access (Zero Trust)\\n- Authentification obligatoire par email\\n- Code OTP \xe0 usage unique\\n- Logs d\'audit de toutes les connexions\\n- Session limit\xe9e \xe0 24h\\n\\n### Couche 3 : Cloudflare Tunnel\\n- Connexion chiffr\xe9e sortante uniquement\\n- Aucun port ouvert sur ma box\\n- IP publique cach\xe9e\\n- Impossible de scanner mon r\xe9seau depuis Internet\\n\\n### Couche 4 : OPNsense Firewall\\n- Firewall stateful (pf de FreeBSD)\\n- Default Deny : tout bloqu\xe9 par d\xe9faut\\n- R\xe8gles granulaires par r\xe9seau\\n- Logs de toutes les tentatives bloqu\xe9es\\n\\n### Couche 5 : Services individuels\\n- 2FA sur Proxmox (TOTP)\\n- 2FA sur OPNsense (Google Authenticator)\\n- Mots de passe forts (20+ caract\xe8res)\\n- Cl\xe9s SSH pour l\'authentification\\n\\n## \u2601\ufe0f Acc\xe8s distant sans port forwarding\\n\\nLe gros challenge : comment acc\xe9der \xe0 mon homelab depuis chez mes parents en d\xe9cembre ?\\n\\n**Solution classique** : Port forwarding (ouvrir le port 51820 pour WireGuard)\\n- \u274c Port ouvert = surface d\'attaque\\n- \u274c IP publique expos\xe9e\\n- \u274c Risque de scan et brute force\\n\\n**Ma solution** : Cloudflare Tunnel\\n- \u2705 Connexion sortante uniquement (aucun port ouvert)\\n- \u2705 IP publique masqu\xe9e\\n- \u2705 Authentification obligatoire\\n- \u2705 Gratuit !\\n\\n### Services accessibles\\n\\nJ\'ai configur\xe9 trois points d\'acc\xe8s via Cloudflare Tunnel :\\n- **Interface de virtualisation** : Gestion des VMs et containers\\n- **Interface du firewall** : Configuration des r\xe8gles r\xe9seau\\n- **Acc\xe8s SSH** : Administration en ligne de commande\\n\\nTous prot\xe9g\xe9s par Cloudflare Access avec authentification obligatoire (email + code OTP).\\n\\nExemple d\'utilisation SSH :\\n```bash\\n# Sur mon laptop, n\'importe o\xf9 dans le monde\\nssh homelab-ssh\\n\\n# Cloudflare ouvre le navigateur pour l\'authentification\\n# Code OTP par email\\n# Connexion \xe9tablie \u2705\\n```\\n\\n**Note de s\xe9curit\xe9** : Les URLs exactes ne sont pas publi\xe9es publiquement. \\nProchaine \xe9tape : Activation du 2FA sur tous les services (en cours).\\n\\n## \ud83d\udcda Documentation compl\xe8te\\n\\nTout est document\xe9 sur [docs.olympus-lab.org](https://docs.olympus-lab.org) avec Docusaurus :\\n\\n- **Architecture** : Vue d\'ensemble, diagrammes r\xe9seau\\n- **Proxmox** : Configuration, bridges, VMs, containers\\n- **OPNsense** : Firewall, r\xe8gles d\xe9taill\xe9es, DHCP, NAT\\n- **Cloudflare Tunnel** : Setup, configuration, troubleshooting\\n- **S\xe9curit\xe9** : R\xe8gles firewall expliqu\xe9es, threat model\\n- **Proc\xe9dures** : Acc\xe8s distant, maintenance, backups\\n\\nLa doc est h\xe9berg\xe9e sur GitHub Pages avec d\xe9ploiement automatique via GitHub Actions. Chaque `git push` met \xe0 jour le site.\\n\\n## \ud83d\udee0\ufe0f Les gal\xe8res et apprentissages\\n\\n### Probl\xe8me 1 : Changement de hostname Proxmox\\n\\nJ\'ai voulu renommer `fox-factory` en `atlas` (nomenclature mythologique grecque). **Grosse erreur** ! Proxmox garde les r\xe9f\xe9rences au nom original dans `/etc/pve/`, qui est un filesystem cluster sp\xe9cial.\\n\\n**R\xe9sultat** : Tous mes containers et VMs ont disparu de l\'interface ! \ud83d\ude31\\n\\n**Solution** : Revenir \xe0 `fox-factory` en interne, utiliser `atlas` uniquement dans la doc publique. Le\xe7on apprise : **ne jamais renommer un node Proxmox en production**.\\n\\n### Probl\xe8me 2 : Container Cloudflare Tunnel perdu\\n\\nLors des tentatives de renommage, le disque du container 202 a \xe9t\xe9 supprim\xe9. Heureusement, **j\'avais un backup** du dossier `/etc/cloudflared/` !\\n\\n**Solution** : Recr\xe9er le container from scratch, restaurer la config. 10 minutes et c\'\xe9tait reparti. **Les backups sauvent des vies** ! \ud83d\udcbe\\n\\n### Probl\xe8me 3 : Tailscale subnet routing\\n\\nJ\'ai essay\xe9 Tailscale pour l\'acc\xe8s distant. Installation ultra simple, mais le **subnet routing** ne fonctionnait pas : impossible d\'acc\xe9der \xe0 OPNsense (10.0.1.1) depuis mon laptop.\\n\\n**Pourquoi ?** Tailscale donne acc\xe8s au r\xe9seau de la machine o\xf9 il est install\xe9 (192.168.1.x), pas aux r\xe9seaux virtuels internes (10.0.x.x).\\n\\n**Solution** : Passer \xe0 Cloudflare Tunnel qui est con\xe7u pour exposer des services internes, pas pour cr\xe9er un VPN mesh.\\n\\n### Probl\xe8me 4 : Certificats SSL auto-sign\xe9s\\n\\nProxmox et OPNsense utilisent des certificats auto-sign\xe9s. Les navigateurs affichent des warnings.\\n\\n**Solution temporaire** : Accepter le risque (je sais que c\'est mon propre serveur).\\n\\n**Solution future** : G\xe9n\xe9rer des vrais certificats Let\'s Encrypt via Cloudflare DNS challenge ou ACME.\\n\\n## \ud83d\udcca Stack technique compl\xe8te\\n\\n| Composant | Technologie | Version |\\n|-----------|-------------|---------|\\n| Hyperviseur | Proxmox VE | 8.x |\\n| Firewall | OPNsense | 24.7 |\\n| Tunnel | Cloudflare Tunnel | Latest |\\n| OS Containers | Ubuntu | 24.04 LTS |\\n| Documentation | Docusaurus | 3.x |\\n| Hosting Doc | GitHub Pages | - |\\n| Domaine | Cloudflare | olympus-lab.org |\\n| DNS | Cloudflare | 1.1.1.1 |\\n\\n**Co\xfbt total** : ~12\u20ac/an (juste le domaine, tout le reste est gratuit !)\\n\\n## \ud83d\ude80 Prochaines \xe9tapes\\n\\n### D\xe9cembre 2025 (chez mes parents)\\n- [ ] Tester l\'acc\xe8s distant en conditions r\xe9elles\\n- [ ] Commencer Python (Automate the Boring Stuff)\\n- [ ] Continuer Practical Networking (cours en ligne)\\n- [ ] Exp\xe9rimenter dans le r\xe9seau DEV\\n\\n### Janvier 2026 (retour \xe0 Nantes)\\n- [ ] D\xe9ployer **GitLab CE** en LAN pour le CI/CD\\n- [ ] Installer **Pi-hole** pour le DNS local + blocage pub\\n- [ ] Setup **Prometheus + Grafana** pour le monitoring\\n- [ ] Configurer les **backups automatiques** (Proxmox Backup Server ?)\\n\\n### Q1 2026\\n- [ ] Apprendre **WireGuard** (dans des VMs de test)\\n- [ ] D\xe9ployer un cluster **K3s** en DEV\\n- [ ] Automatiser avec **Ansible** (playbooks pour tout)\\n- [ ] Ajouter un deuxi\xe8me node Proxmox (si budget)\\n\\n### Long terme\\n- [ ] Certifications : AWS, Azure, Kubernetes\\n- [ ] Contribuer \xe0 des projets open source\\n- [ ] Documenter et partager mes apprentissages\\n\\n## \ud83d\udcad R\xe9flexions\\n\\n### Ce que j\'ai appris\\n\\n**Networking** : Avant ce projet, les VLANs et la segmentation r\xe9seau \xe9taient abstraits. Maintenant, je **comprends** vraiment comment fonctionne un firewall, le NAT, le routing, les ACLs. J\'ai cass\xe9 des choses, debugg\xe9 pendant des heures, et c\'est comme \xe7a qu\'on apprend vraiment.\\n\\n**S\xe9curit\xe9** : Le principe de **Defense in Depth** n\'est pas juste th\xe9orique. Chaque couche compte. Si j\'avais juste fait du port forwarding basique, j\'aurais un point d\'entr\xe9e unique. Maintenant, pour atteindre mes services, il faut :\\n1. Passer Cloudflare Edge (DDoS protection)\\n2. S\'authentifier via Access (email + OTP)\\n3. Traverser le tunnel chiffr\xe9\\n4. Passer le firewall OPNsense\\n5. S\'authentifier sur le service final\\n\\n**Infrastructure as Code** : Documenter tout dans Docusaurus me force \xe0 comprendre ce que je fais. Si je ne peux pas l\'expliquer clairement dans la doc, c\'est que je ne le comprends pas vraiment. La doc devient aussi un **backup de ma connaissance**.\\n\\n**\xc9checs = Apprentissage** : J\'ai cass\xe9 mon infrastructure plusieurs fois. Chaque fois, j\'ai appris :\\n- L\'importance des backups\\n- Comment d\xe9bugger m\xe9thodiquement\\n- La valeur de la documentation\\n- Qu\'il faut tester avant de modifier la prod\\n\\n### Pourquoi un homelab en 2025 ?\\n\\nCertains diraient : \\"Pourquoi ne pas juste utiliser AWS ou Azure ?\\"\\n\\n**Ma r\xe9ponse** :\\n- Je veux comprendre **comment \xe7a marche en dessous**\\n- Les clouds abstraient trop de choses\\n- Un homelab, c\'est **gratuit** (apr\xe8s l\'investissement initial)\\n- Je peux casser sans craindre une facture de 500\u20ac\\n- C\'est **mon** labo, mes r\xe8gles, mes exp\xe9rimentations\\n\\nEn alternance, je travaille sur Oracle Cloud et GitLab. Mais dans mon homelab, je peux tout essayer : k3s, Ansible, Terraform, Prometheus, sans limite.\\n\\n## \ud83c\udf93 Pour les d\xe9butants qui lisent \xe7a\\n\\nSi tu d\xe9butes en DevOps et que tu veux cr\xe9er ton homelab :\\n\\n### Commence petit\\n- Une seule VM suffit au d\xe9but\\n- Pas besoin de segmentation r\xe9seau complexe\\n- Apprends Proxmox ou VirtualBox d\'abord\\n\\n### Documente tout\\n- Prends des notes\\n- Capture des screenshots\\n- \xc9cris les commandes que tu utilises\\n- Future toi te remerciera\\n\\n### Casse des choses\\n- Les erreurs sont tes meilleures profs\\n- Fais des snapshots avant de modifier\\n- Teste dans un environnement isol\xe9 (DEV)\\n\\n### Apprends les bases\\n- **Networking** : Comprends IP, subnets, routing, NAT\\n- **Linux** : CLI, permissions, services systemd\\n- **Virtualisation** : Concepts de VMs, containers, hyperviseurs\\n\\n### S\xe9curit\xe9 d\'abord\\n- Jamais de port forwarding sans r\xe9fl\xe9chir\\n- Toujours des mots de passe forts\\n- 2FA partout o\xf9 c\'est possible\\n- Backups r\xe9guliers\\n\\n## \ud83d\udcc8 M\xe9triques\\n\\nDepuis le d\xe9but du projet :\\n\\n- **Temps investi** : ~40 heures (configuration, debug, doc)\\n- **Erreurs commises** : Trop pour compter (c\'est \xe7a apprendre !)\\n- **Services d\xe9ploy\xe9s** : 3 (Proxmox, OPNsense, Cloudflare Tunnel)\\n- **Lignes de doc** : ~3000 (7 fichiers Markdown)\\n- **Commits Git** : 15+\\n- **Caf\xe9 consomm\xe9** : Beaucoup \u2615\\n\\n## \ud83c\udf38 Nomenclature mythologique\\n\\nParce que DevOps, c\'est aussi s\'amuser :\\n\\n- **Atlas** : Proxmox node (le titan qui porte l\'infrastructure)\\n- **Olympus** : OPNsense (le mont Olympe, centre de contr\xf4le)\\n- **Hermes** : Cloudflare Tunnel (le messager des dieux)\\n\\nProchains services :\\n- **Hephaestus** : GitLab (la forge de code)\\n- **Prometheus** : Monitoring (appropri\xe9 !)\\n- **Apollo** : CI/CD pipeline\\n- **Artemis** : Backup system\\n- **Poseidon** : Storage server\\n\\nLogo : \ud83c\udf38 Hanami (fleur de cerisier) + \ud83c\udf19 Lune = esth\xe9tique japonaise + mythologie grecque.\\n\\n## \ud83c\udf89 Conclusion\\n\\n**Olympus Lab est maintenant op\xe9rationnel** ! Je peux :\\n- \u2705 Cr\xe9er des VMs et containers \xe0 volont\xe9\\n- \u2705 Exp\xe9rimenter en toute s\xe9curit\xe9\\n- \u2705 Acc\xe9der depuis n\'importe o\xf9\\n- \u2705 Apprendre en cassant et r\xe9parant\\n- \u2705 Documenter mes apprentissages\\n\\nLa prochaine fois que quelqu\'un me demandera \\"C\'est quoi DevOps ?\\", je pourrai montrer mon homelab et dire : **\\"C\'est \xe7a. Et c\'est moi qui l\'ai construit.\\"** \ud83d\udcaa\\n\\nRendez-vous dans le prochain article pour le d\xe9ploiement de GitLab ! \ud83d\ude80\\n\\n---\\n\\n**Stack** : Proxmox VE \u2022 OPNsense \u2022 Cloudflare Tunnel \u2022 Ubuntu 24.04 \u2022 Docusaurus\\n\\n**Tags** : #DevOps #Homelab #Infrastructure #Networking #Security #Learning\\n\\n**Documentation** : [docs.olympus-lab.org](https://docs.olympus-lab.org)"}]}}')}}]);