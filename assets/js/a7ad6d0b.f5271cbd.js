"use strict";(globalThis.webpackChunkhomelab_docs=globalThis.webpackChunkhomelab_docs||[]).push([[3352],{1793:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"homelab/services/docker-containers","title":"\ud83d\udc33 Docker Containers","description":"Tous les services d\xe9ploy\xe9s via Docker sur la VM Docker (10.0.1.102).","source":"@site/docs/homelab/services/docker-containers.md","sourceDirName":"homelab/services","slug":"/homelab/services/docker-containers","permalink":"/docs/homelab/services/docker-containers","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/homelab/services/docker-containers.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"R\xe8gles Firewall d\xe9taill\xe9es","permalink":"/docs/homelab/security/firewall-rules"},"next":{"title":"\ud83d\udcca Monitoring","permalink":"/docs/homelab/services/monitoring"}}');var l=s(4848),r=s(8453);const c={sidebar_position:1},t="\ud83d\udc33 Docker Containers",o={},d=[{value:"\ud83d\udce6 VM Docker",id:"-vm-docker",level:2},{value:"\ud83c\udf9b\ufe0f Dockge (Gestion Docker)",id:"\ufe0f-dockge-gestion-docker",level:2},{value:"Configuration",id:"configuration",level:3},{value:"Acc\xe8s",id:"acc\xe8s",level:3},{value:"Utilisation",id:"utilisation",level:3},{value:"\ud83d\udcca Uptime Kuma (Monitoring l\xe9ger)",id:"-uptime-kuma-monitoring-l\xe9ger",level:2},{value:"Configuration",id:"configuration-1",level:3},{value:"Acc\xe8s",id:"acc\xe8s-1",level:3},{value:"Services monitor\xe9s",id:"services-monitor\xe9s",level:3},{value:"Alertes Discord",id:"alertes-discord",level:3},{value:"\u2601\ufe0f Nextcloud (Cloud personnel)",id:"\ufe0f-nextcloud-cloud-personnel",level:2},{value:"Architecture",id:"architecture",level:3},{value:"Configuration",id:"configuration-2",level:3},{value:"Acc\xe8s",id:"acc\xe8s-2",level:3},{value:"Clients",id:"clients",level:3},{value:"Apps install\xe9es",id:"apps-install\xe9es",level:3},{value:"Maintenance",id:"maintenance",level:3},{value:"\ud83d\udccb Stack template (\xe0 venir)",id:"-stack-template-\xe0-venir",level:2},{value:"GitLab CE / Gitea",id:"gitlab-ce--gitea",level:3},{value:"Prometheus + Grafana",id:"prometheus--grafana",level:3},{value:"Pi-hole",id:"pi-hole",level:3},{value:"\ud83d\udd27 Commandes utiles",id:"-commandes-utiles",level:2},{value:"Docker g\xe9n\xe9ral",id:"docker-g\xe9n\xe9ral",level:3},{value:"Docker Compose",id:"docker-compose",level:3},{value:"Docker Volumes",id:"docker-volumes",level:3},{value:"Docker Networks",id:"docker-networks",level:3},{value:"\ud83d\udc1b Troubleshooting",id:"-troubleshooting",level:2},{value:"Container ne d\xe9marre pas",id:"container-ne-d\xe9marre-pas",level:3},{value:"Probl\xe8me de r\xe9seau entre containers",id:"probl\xe8me-de-r\xe9seau-entre-containers",level:3},{value:"Volume plein",id:"volume-plein",level:3},{value:"Performances d\xe9grad\xe9es",id:"performances-d\xe9grad\xe9es",level:3},{value:"\ud83d\udcca Monitoring des ressources",id:"-monitoring-des-ressources",level:2},{value:"Via Dockge",id:"via-dockge",level:3},{value:"Via CLI",id:"via-cli",level:3},{value:"Alertes \xe0 configurer (futur)",id:"alertes-\xe0-configurer-futur",level:3},{value:"\ud83d\udd10 S\xe9curit\xe9",id:"-s\xe9curit\xe9",level:2},{value:"Bonnes pratiques",id:"bonnes-pratiques",level:3},{value:"Updates",id:"updates",level:3},{value:"Backup",id:"backup",level:3},{value:"\ud83d\udcc8 \xc9volution",id:"-\xe9volution",level:2},{value:"Stacks d\xe9ploy\xe9es",id:"stacks-d\xe9ploy\xe9es",level:3},{value:"Am\xe9liorations pr\xe9vues",id:"am\xe9liorations-pr\xe9vues",level:3}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"-docker-containers",children:"\ud83d\udc33 Docker Containers"})}),"\n",(0,l.jsx)(n.p,{children:"Tous les services d\xe9ploy\xe9s via Docker sur la VM Docker (10.0.1.102)."}),"\n",(0,l.jsx)(n.h2,{id:"-vm-docker",children:"\ud83d\udce6 VM Docker"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Sp\xe9cifications"})," :"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Hostname"})," : docker-host"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"OS"})," : Ubuntu 24.04 LTS"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"IP"})," : 10.0.1.102"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"RAM"})," : [\xe0 remplir] GB"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"CPU"})," : [\xe0 remplir] cores"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"R\xe9seau"})," : LAN (vmbr1)"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Gestion"})," :"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Interface : Dockge (https: //dockge.[domain].org)"}),"\n",(0,l.jsxs)(n.li,{children:["Acc\xe8s SSH : ",(0,l.jsx)(n.code,{children:"ssh docker-admin@10.0.1.102"})]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"\ufe0f-dockge-gestion-docker",children:"\ud83c\udf9b\ufe0f Dockge (Gestion Docker)"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Fonction"})," : Interface web pour g\xe9rer les stacks Docker Compose"]}),"\n",(0,l.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'services:\n  dockge:\n    image: louislam/dockge:latest\n    container_name: dockge\n    restart: unless-stopped\n    ports:\n      - "5001:5001"\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - ./data:/app/data\n      - ./stacks:/opt/stacks\n    environment:\n      - DOCKGE_STACKS_DIR=/opt/stacks\n'})}),"\n",(0,l.jsx)(n.h3,{id:"acc\xe8s",children:"Acc\xe8s"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"URL"})," : https: //dockge.[domain].org"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Protection"})," : Cloudflare Access"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Credentials"})," : [stocker dans gestionnaire de mots de passe]"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"utilisation",children:"Utilisation"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"D\xe9ployer une stack"})," :"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"+ Compose"})}),"\n",(0,l.jsx)(n.li,{children:"Nom de la stack"}),"\n",(0,l.jsxs)(n.li,{children:["Coller le ",(0,l.jsx)(n.code,{children:"docker-compose.yml"})]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"Deploy"})}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"G\xe9rer une stack"})," :"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Start/Stop/Restart"}),"\n",(0,l.jsx)(n.li,{children:"Edit (modifier le compose)"}),"\n",(0,l.jsx)(n.li,{children:"Logs en temps r\xe9el"}),"\n",(0,l.jsx)(n.li,{children:"Terminal"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-uptime-kuma-monitoring-l\xe9ger",children:"\ud83d\udcca Uptime Kuma (Monitoring l\xe9ger)"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Fonction"})," : Surveillance HTTP/HTTPS des services"]}),"\n",(0,l.jsx)(n.h3,{id:"configuration-1",children:"Configuration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'services:\n  uptime-kuma:\n    image: louislam/uptime-kuma:latest\n    container_name: uptime-kuma\n    restart: unless-stopped\n    ports:\n      - "3001:3001"\n    volumes:\n      - uptime-kuma:/app/data\n\nvolumes:\n  uptime-kuma:\n'})}),"\n",(0,l.jsx)(n.h3,{id:"acc\xe8s-1",children:"Acc\xe8s"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"URL"})," : https: //uptime.[domain].org"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Bot Discord"})," : Iris \ud83c\udf08"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Webhook"})," : [stocker s\xe9par\xe9ment]"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"services-monitor\xe9s",children:"Services monitor\xe9s"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Service"}),(0,l.jsx)(n.th,{children:"URL"}),(0,l.jsx)(n.th,{children:"Intervalle"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Proxmox"}),(0,l.jsx)(n.td,{children:"https: //proxmox.[domain].org"}),(0,l.jsx)(n.td,{children:"60s"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"OPNsense"}),(0,l.jsx)(n.td,{children:"https: //opnsense.[domain].org"}),(0,l.jsx)(n.td,{children:"60s"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Dockge"}),(0,l.jsx)(n.td,{children:"https: //dockge.[domain].org"}),(0,l.jsx)(n.td,{children:"60s"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Nextcloud"}),(0,l.jsx)(n.td,{children:"https: //nextcloud.[domain].org"}),(0,l.jsx)(n.td,{children:"60s"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Documentation"}),(0,l.jsx)(n.td,{children:"https: //docs.[domain].org"}),(0,l.jsx)(n.td,{children:"300s"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"alertes-discord",children:"Alertes Discord"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Configuration"})," :"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Notification Type : Discord"}),"\n",(0,l.jsx)(n.li,{children:"Webhook URL : [webhook Iris]"}),"\n",(0,l.jsx)(n.li,{children:"Trigger : Down, Error"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Messages"})," :"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\ud83d\udfe2 ",(0,l.jsx)(n.code,{children:"Iris: [Service] is back online"})]}),"\n",(0,l.jsxs)(n.li,{children:["\ud83d\udd34 ",(0,l.jsx)(n.code,{children:"Iris: [Service] is DOWN!"})]}),"\n",(0,l.jsxs)(n.li,{children:["\ud83d\udfe1 ",(0,l.jsx)(n.code,{children:"Iris: [Service] response time: XXXXms (slow)"})]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"\ufe0f-nextcloud-cloud-personnel",children:"\u2601\ufe0f Nextcloud (Cloud personnel)"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Fonction"})," : Synchronisation de fichiers entre appareils"]}),"\n",(0,l.jsx)(n.h3,{id:"architecture",children:"Architecture"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"nextcloud"})," : Application web"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"nextcloud-db"})," : PostgreSQL 16"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"nextcloud-redis"})," : Cache Redis"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"configuration-2",children:"Configuration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'services:\n  nextcloud:\n    image: nextcloud:latest\n    container_name: nextcloud\n    restart: unless-stopped\n    ports:\n      - "8083:80"\n    environment:\n      - POSTGRES_HOST=db\n      - POSTGRES_DB=nextcloud\n      - POSTGRES_USER=nextcloud\n      - POSTGRES_PASSWORD=[mot-de-passe]\n      - REDIS_HOST=redis\n      - NEXTCLOUD_TRUSTED_DOMAINS=[domain].org [IP-locale]\n      - TRUSTED_PROXIES=172.16.0.0/12\n      - OVERWRITEPROTOCOL=https\n      - OVERWRITEHOST=[domain].org\n    volumes:\n      - nextcloud_data:/var/www/html\n    depends_on:\n      - db\n      - redis\n    networks:\n      - nextcloud_net\n\n  db:\n    image: postgres:16-alpine\n    container_name: nextcloud-db\n    restart: unless-stopped\n    environment:\n      - POSTGRES_DB=nextcloud\n      - POSTGRES_USER=nextcloud\n      - POSTGRES_PASSWORD=[mot-de-passe]\n    volumes:\n      - db_data:/var/lib/postgresql/data\n    networks:\n      - nextcloud_net\n\n  redis:\n    image: redis:alpine\n    container_name: nextcloud-redis\n    restart: unless-stopped\n    networks:\n      - nextcloud_net\n\nvolumes:\n  nextcloud_data:\n  db_data:\n\nnetworks:\n  nextcloud_net:\n'})}),"\n",(0,l.jsx)(n.h3,{id:"acc\xe8s-2",children:"Acc\xe8s"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"URL Web"})," : https: //nextcloud.[domain].org"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"WebDAV"})," : https: //nextcloud.[domain].org/remote.php/dav/"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Admin"})," : admin / [mot-de-passe]"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"clients",children:"Clients"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Desktop"})," :"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Windows : https: //nextcloud.com/install/#install-clients"}),"\n",(0,l.jsx)(n.li,{children:"Configuration : Server URL + credentials"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Mobile"})," :"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:'Android/iOS : App "Nextcloud" officielle'}),"\n",(0,l.jsx)(n.li,{children:"Auto-upload photos : Activable"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"apps-install\xe9es",children:"Apps install\xe9es"}),"\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Files (par d\xe9faut)"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Calendar"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Contacts"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Notes"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Collabora Online (\xe9dition documents)"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Photos"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"maintenance",children:"Maintenance"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Backup"})," :"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Arr\xeater Nextcloud\ndocker compose -f ~/stacks/nextcloud/docker-compose.yml down\n\n# Backup volumes\nsudo tar czf nextcloud-backup-$(date +%Y%m%d).tar.gz \\\n  /var/lib/docker/volumes/nextcloud_nextcloud_data \\\n  /var/lib/docker/volumes/nextcloud_db_data\n\n# Red\xe9marrer\ndocker compose -f ~/stacks/nextcloud/docker-compose.yml up -d\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-stack-template-\xe0-venir",children:"\ud83d\udccb Stack template (\xe0 venir)"}),"\n",(0,l.jsx)(n.h3,{id:"gitlab-ce--gitea",children:"GitLab CE / Gitea"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Fonction"})," : H\xe9bergement Git + CI/CD"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"D\xe9cision"})," : Gitea (plus l\xe9ger) ou GitLab CE (plus complet)"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Ressources"})," :"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Gitea : ~500 MB RAM"}),"\n",(0,l.jsx)(n.li,{children:"GitLab CE : ~4 GB RAM"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"prometheus--grafana",children:"Prometheus + Grafana"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Fonction"})," : Monitoring avanc\xe9 avec m\xe9triques"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Voir"})," : ",(0,l.jsx)(n.a,{href:"/docs/homelab/services/monitoring",children:"Monitoring"})]}),"\n",(0,l.jsx)(n.h3,{id:"pi-hole",children:"Pi-hole"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Fonction"})," : DNS + blocage publicit\xe9s"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Pr\xe9requis"})," : Configuration OPNsense pour utiliser Pi-hole comme DNS"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-commandes-utiles",children:"\ud83d\udd27 Commandes utiles"}),"\n",(0,l.jsx)(n.h3,{id:"docker-g\xe9n\xe9ral",children:"Docker g\xe9n\xe9ral"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Lister tous les containers\ndocker ps -a\n\n# Voir les logs d'un container\ndocker logs [container-name] -f\n\n# Entrer dans un container\ndocker exec -it [container-name] bash\n\n# Red\xe9marrer un container\ndocker restart [container-name]\n\n# Voir les ressources utilis\xe9es\ndocker stats\n\n# Nettoyer les images inutilis\xe9es\ndocker system prune -a\n"})}),"\n",(0,l.jsx)(n.h3,{id:"docker-compose",children:"Docker Compose"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# D\xe9marrer une stack\ndocker compose up -d\n\n# Arr\xeater une stack\ndocker compose down\n\n# Red\xe9marrer une stack\ndocker compose restart\n\n# Voir les logs\ndocker compose logs -f\n\n# Rebuild une stack\ndocker compose up -d --build\n"})}),"\n",(0,l.jsx)(n.h3,{id:"docker-volumes",children:"Docker Volumes"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Lister les volumes\ndocker volume ls\n\n# Inspecter un volume\ndocker volume inspect [volume-name]\n\n# Supprimer un volume\ndocker volume rm [volume-name]\n\n# Nettoyer les volumes inutilis\xe9s\ndocker volume prune\n"})}),"\n",(0,l.jsx)(n.h3,{id:"docker-networks",children:"Docker Networks"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Lister les r\xe9seaux\ndocker network ls\n\n# Inspecter un r\xe9seau\ndocker network inspect [network-name]\n\n# Voir les containers sur un r\xe9seau\ndocker network inspect [network-name] | grep Name\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-troubleshooting",children:"\ud83d\udc1b Troubleshooting"}),"\n",(0,l.jsx)(n.h3,{id:"container-ne-d\xe9marre-pas",children:"Container ne d\xe9marre pas"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Voir les logs d\xe9taill\xe9s\ndocker logs [container-name] --tail 100\n\n# V\xe9rifier la config\ndocker inspect [container-name]\n\n# Tester manuellement\ndocker run -it [image-name] sh\n"})}),"\n",(0,l.jsx)(n.h3,{id:"probl\xe8me-de-r\xe9seau-entre-containers",children:"Probl\xe8me de r\xe9seau entre containers"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# V\xe9rifier que les containers sont sur le m\xeame network\ndocker network inspect [network-name]\n\n# Tester la connectivit\xe9\ndocker exec [container1] ping [container2]\n"})}),"\n",(0,l.jsx)(n.h3,{id:"volume-plein",children:"Volume plein"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Voir l'espace disque\ndf -h\n\n# Voir l'espace des volumes Docker\ndocker system df\n\n# Nettoyer\ndocker system prune -a --volumes\n"})}),"\n",(0,l.jsx)(n.h3,{id:"performances-d\xe9grad\xe9es",children:"Performances d\xe9grad\xe9es"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# Voir les ressources en temps r\xe9el\ndocker stats\n\n# Limiter les ressources d\'un container\ndocker update --memory="512m" --cpus="1.0" [container-name]\n'})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-monitoring-des-ressources",children:"\ud83d\udcca Monitoring des ressources"}),"\n",(0,l.jsx)(n.h3,{id:"via-dockge",children:"Via Dockge"}),"\n",(0,l.jsx)(n.p,{children:"Interface \u2192 Stack \u2192 Voir CPU/RAM en temps r\xe9el"}),"\n",(0,l.jsx)(n.h3,{id:"via-cli",children:"Via CLI"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Stats en temps r\xe9el\ndocker stats\n\n# Espace disque\ndocker system df -v\n"})}),"\n",(0,l.jsx)(n.h3,{id:"alertes-\xe0-configurer-futur",children:"Alertes \xe0 configurer (futur)"}),"\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","CPU > 80% pendant 5 min"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","RAM > 90%"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Disque > 85%"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Container down > 1 min"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-s\xe9curit\xe9",children:"\ud83d\udd10 S\xe9curit\xe9"}),"\n",(0,l.jsx)(n.h3,{id:"bonnes-pratiques",children:"Bonnes pratiques"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u2705 Restart policy : ",(0,l.jsx)(n.code,{children:"unless-stopped"})]}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Pas de port expos\xe9 inutilement"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Networks isol\xe9s par stack"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Volumes pour donn\xe9es persistantes"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Variables d'environnement pour secrets"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Images officielles uniquement"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Updates r\xe9guli\xe8res"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"updates",children:"Updates"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Pull les nouvelles images\ndocker compose pull\n\n# Red\xe9ployer avec nouvelles images\ndocker compose up -d\n\n# Nettoyer les anciennes images\ndocker image prune -a\n"})}),"\n",(0,l.jsx)(n.h3,{id:"backup",children:"Backup"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Fr\xe9quence"})," : Hebdomadaire (automatis\xe9 \xe0 venir)"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Contenu"})," :"]}),"\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","docker-compose.yml de toutes les stacks"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Volumes Docker critiques (Nextcloud, bases de donn\xe9es)"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Configuration Dockge"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Destination"})," : [\xe0 d\xe9finir - NAS ? Cloud ?]"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-\xe9volution",children:"\ud83d\udcc8 \xc9volution"}),"\n",(0,l.jsx)(n.h3,{id:"stacks-d\xe9ploy\xe9es",children:"Stacks d\xe9ploy\xe9es"}),"\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","Dockge"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","Uptime Kuma"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","Nextcloud"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Gitea / GitLab"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Prometheus + Grafana"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Pi-hole"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","[autres services \xe0 venir]"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"am\xe9liorations-pr\xe9vues",children:"Am\xe9liorations pr\xe9vues"}),"\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Automatisation des backups"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Monitoring avanc\xe9 (Prometheus)"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Alertes avanc\xe9es (PagerDuty ?)"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","CI/CD avec GitLab"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Reverse proxy interne (Caddy/Traefik)"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Clustering (Docker Swarm ou K3s)"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>t});var i=s(6540);const l={},r=i.createContext(l);function c(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:c(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);