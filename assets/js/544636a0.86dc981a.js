"use strict";(globalThis.webpackChunkhomelab_docs=globalThis.webpackChunkhomelab_docs||[]).push([[2178],{5578:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>t,default:()=>x,frontMatter:()=>d,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"homelab/infrastructure/overview","title":"Vue d\'ensemble de l\'infrastructure","description":"Architecture Olympus Lab","source":"@site/docs/homelab/infrastructure/overview.md","sourceDirName":"homelab/infrastructure","slug":"/homelab/infrastructure/overview","permalink":"/docs/homelab/infrastructure/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/homelab/infrastructure/overview.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Bienvenue sur mon Homelab DevOps","permalink":"/docs/intro"},"next":{"title":"Proxmox VE - Atlas","permalink":"/docs/homelab/infrastructure/proxmox"}}');var l=n(4848),i=n(8453);const d={sidebar_position:1},t="Vue d'ensemble de l'infrastructure",c={},h=[{value:"Architecture Olympus Lab",id:"architecture-olympus-lab",level:2},{value:"Nomenclature mythologique",id:"nomenclature-mythologique",level:3},{value:"Plan d&#39;adressage r\xe9seau",id:"plan-dadressage-r\xe9seau",level:2},{value:"R\xe9seaux segment\xe9s",id:"r\xe9seaux-segment\xe9s",level:3},{value:"DHCP Ranges (OPNsense)",id:"dhcp-ranges-opnsense",level:3},{value:"Infrastructure physique",id:"infrastructure-physique",level:2},{value:"Serveur Proxmox VE &quot;Atlas&quot;",id:"serveur-proxmox-ve-atlas",level:3},{value:"Bridges r\xe9seau",id:"bridges-r\xe9seau",level:3},{value:"VMs et Containers",id:"vms-et-containers",level:2},{value:"VM 100 - Olympus (OPNsense)",id:"vm-100---olympus-opnsense",level:3},{value:"CT 200 - opn-access",id:"ct-200---opn-access",level:3},{value:"CT 202 - Hermes (Cloudflare Tunnel)",id:"ct-202---hermes-cloudflare-tunnel",level:3},{value:"Domaine et DNS",id:"domaine-et-dns",level:2},{value:"Domaine principal",id:"domaine-principal",level:3},{value:"Services expos\xe9s",id:"services-expos\xe9s",level:3},{value:"DynDNS",id:"dyndns",level:3},{value:"S\xe9curit",id:"s\xe9curit",level:2}];function o(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.header,{children:(0,l.jsx)(s.h1,{id:"vue-densemble-de-linfrastructure",children:"Vue d'ensemble de l'infrastructure"})}),"\n",(0,l.jsx)(s.h2,{id:"architecture-olympus-lab",children:"Architecture Olympus Lab"}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Olympus Lab"})," est un homelab DevOps professionnel bas\xe9 sur Proxmox VE et OPNsense, avec acc\xe8s distant s\xe9curis\xe9 via Cloudflare Tunnel."]}),"\n",(0,l.jsx)(s.h3,{id:"nomenclature-mythologique",children:"Nomenclature mythologique"}),"\n",(0,l.jsx)(s.p,{children:"Inspir\xe9 de la mythologie grecque, chaque composant porte le nom d'une divinit\xe9 ou d'un titan :"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Atlas"})," : Node Proxmox principal (porte l'infrastructure)"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Olympus"})," : OPNsense (Mont Olympe = centre de contr\xf4le)"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Hermes"})," : Cloudflare Tunnel (messager des dieux)"]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h2,{id:"plan-dadressage-r\xe9seau",children:"Plan d'adressage r\xe9seau"}),"\n",(0,l.jsx)(s.h3,{id:"r\xe9seaux-segment\xe9s",children:"R\xe9seaux segment\xe9s"}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"R\xe9seau"}),(0,l.jsx)(s.th,{children:"CIDR"}),(0,l.jsx)(s.th,{children:"Usage"}),(0,l.jsx)(s.th,{children:"Gateway"}),(0,l.jsx)(s.th,{children:"Naming"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"WAN"}),(0,l.jsx)(s.td,{children:"192.168.1.0/24"}),(0,l.jsx)(s.td,{children:"Connexion Internet"}),(0,l.jsx)(s.td,{children:"192.168.1.254"}),(0,l.jsx)(s.td,{children:"-"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"LAN"}),(0,l.jsx)(s.td,{children:"10.0.1.0/24"}),(0,l.jsx)(s.td,{children:"Production"}),(0,l.jsx)(s.td,{children:"10.0.1.1"}),(0,l.jsx)(s.td,{children:"Olympus"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"DMZ"}),(0,l.jsx)(s.td,{children:"10.0.2.0/24"}),(0,l.jsx)(s.td,{children:"Services expos\xe9s"}),(0,l.jsx)(s.td,{children:"10.0.2.1"}),(0,l.jsx)(s.td,{children:"Demilitarized"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"DEV"}),(0,l.jsx)(s.td,{children:"10.0.3.0/24"}),(0,l.jsx)(s.td,{children:"D\xe9veloppement"}),(0,l.jsx)(s.td,{children:"10.0.3.1"}),(0,l.jsx)(s.td,{children:"Development"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"MGMT"}),(0,l.jsx)(s.td,{children:"10.0.4.0/24"}),(0,l.jsx)(s.td,{children:"Administration"}),(0,l.jsx)(s.td,{children:"10.0.4.1"}),(0,l.jsx)(s.td,{children:"Management"})]})]})]}),"\n",(0,l.jsx)(s.h3,{id:"dhcp-ranges-opnsense",children:"DHCP Ranges (OPNsense)"}),"\n",(0,l.jsx)(s.p,{children:"Chaque r\xe9seau a une plage DHCP pour les VMs temporaires :"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"LAN"})," : 10.0.1.100-200"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"DMZ"})," : 10.0.2.100-200"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"DEV"})," : 10.0.3.100-200"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"MGMT"})," : 10.0.4.100-200"]}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"IPs statiques r\xe9serv\xe9es"})," : x.x.x.2-99"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h2,{id:"infrastructure-physique",children:"Infrastructure physique"}),"\n",(0,l.jsx)(s.h3,{id:"serveur-proxmox-ve-atlas",children:'Serveur Proxmox VE "Atlas"'}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Mod\xe8le"})," : Lenovo ThinkCentre M710S"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Hostname"})," : atlas (anciennement fox-factory)"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Version"})," : Proxmox VE 8.x"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"IP Management"})," : 192.168.1.51"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Stockage"})," : local-lvm"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Acc\xe8s Web"})," : ",(0,l.jsx)(s.a,{href:"https://proxmox.olympus-lab.org",children:"https://proxmox.olympus-lab.org"})]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Acc\xe8s SSH"})," : ",(0,l.jsx)(s.code,{children:"ssh ssh-proxmox"})]}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"bridges-r\xe9seau",children:"Bridges r\xe9seau"}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"Bridge"}),(0,l.jsx)(s.th,{children:"Description"}),(0,l.jsx)(s.th,{children:"R\xe9seau"}),(0,l.jsx)(s.th,{children:"Interface physique"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"vmbr0"}),(0,l.jsx)(s.td,{children:"WAN/Management"}),(0,l.jsx)(s.td,{children:"192.168.1.0/24"}),(0,l.jsx)(s.td,{children:"enp1s0 (physique)"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"vmbr1"}),(0,l.jsx)(s.td,{children:"LAN"}),(0,l.jsx)(s.td,{children:"10.0.1.0/24"}),(0,l.jsx)(s.td,{children:"Virtuel"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"vmbr2"}),(0,l.jsx)(s.td,{children:"DMZ"}),(0,l.jsx)(s.td,{children:"10.0.2.0/24"}),(0,l.jsx)(s.td,{children:"Virtuel"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"vmbr3"}),(0,l.jsx)(s.td,{children:"DEV"}),(0,l.jsx)(s.td,{children:"10.0.3.0/24"}),(0,l.jsx)(s.td,{children:"Virtuel"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"vmbr4"}),(0,l.jsx)(s.td,{children:"MGMT"}),(0,l.jsx)(s.td,{children:"10.0.4.0/24"}),(0,l.jsx)(s.td,{children:"Virtuel"})]})]})]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h2,{id:"vms-et-containers",children:"VMs et Containers"}),"\n",(0,l.jsx)(s.h3,{id:"vm-100---olympus-opnsense",children:"VM 100 - Olympus (OPNsense)"}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"R\xf4le"})," : Firewall et routeur central"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Type"})," : VM"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"OS"})," : OPNsense 24.7"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"RAM"})," : 2 GB"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"CPU"})," : 2 cores"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Disque"})," : 32 GB"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Interfaces"})," :","\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"vtnet0 \u2192 vmbr0 (WAN)"}),"\n",(0,l.jsx)(s.li,{children:"vtnet1 \u2192 vmbr1 (LAN)"}),"\n",(0,l.jsx)(s.li,{children:"vtnet2 \u2192 vmbr2 (DMZ)"}),"\n",(0,l.jsx)(s.li,{children:"vtnet3 \u2192 vmbr3 (DEV)"}),"\n",(0,l.jsx)(s.li,{children:"vtnet4 \u2192 vmbr4 (MGMT)"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Acc\xe8s"})," : ",(0,l.jsx)(s.a,{href:"https://opnsense.olympus-lab.org",children:"https://opnsense.olympus-lab.org"})]}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"ct-200---opn-access",children:"CT 200 - opn-access"}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"R\xf4le"})," : Container temporaire pour acc\xe8s local OPNsense"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Type"})," : LXC Container"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"OS"})," : Ubuntu 24.04"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"RAM"})," : 512 MB"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"R\xe9seau"})," : vmbr1 (LAN) - DHCP"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Status"})," : Peut \xeatre arr\xeat\xe9 quand non utilis\xe9"]}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"ct-202---hermes-cloudflare-tunnel",children:"CT 202 - Hermes (Cloudflare Tunnel)"}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"R\xf4le"})," : Tunnel s\xe9curis\xe9 pour acc\xe8s distant"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Type"})," : LXC Container"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"OS"})," : Ubuntu 24.04"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"RAM"})," : 256 MB"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"CPU"})," : 1 core"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"R\xe9seau"})," : vmbr1 (10.0.1.104)"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Service"})," : cloudflared (systemd)"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Tunnel ID"})," : f7fedba1-6be1-4408-a755-e9badd33f9a0"]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h2,{id:"domaine-et-dns",children:"Domaine et DNS"}),"\n",(0,l.jsx)(s.h3,{id:"domaine-principal",children:"Domaine principal"}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"olympus-lab.org"})," (Cloudflare)"]}),"\n",(0,l.jsx)(s.h3,{id:"services-expos\xe9s",children:"Services expos\xe9s"}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"Subdomain"}),(0,l.jsx)(s.th,{children:"Service"}),(0,l.jsx)(s.th,{children:"Destination"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"docs.olympus-lab.org"}),(0,l.jsx)(s.td,{children:"Documentation"}),(0,l.jsx)(s.td,{children:"GitHub Pages"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"proxmox.olympus-lab.org"}),(0,l.jsx)(s.td,{children:"Proxmox Web"}),(0,l.jsx)(s.td,{children:"192.168.1.51:8006"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"opnsense.olympus-lab.org"}),(0,l.jsx)(s.td,{children:"OPNsense Web"}),(0,l.jsx)(s.td,{children:"10.0.1.1:443"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"ssh-proxmox.olympus-lab.org"}),(0,l.jsx)(s.td,{children:"Proxmox SSH"}),(0,l.jsx)(s.td,{children:"192.168.1.51:22"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"vpn.olympus-lab.org"}),(0,l.jsx)(s.td,{children:"DynDNS"}),(0,l.jsx)(s.td,{children:"IP publique"})]})]})]}),"\n",(0,l.jsx)(s.h3,{id:"dyndns",children:"DynDNS"}),"\n",(0,l.jsxs)(s.p,{children:["Configuration automatique avec ",(0,l.jsx)(s.strong,{children:"ddclient"})," sur Proxmox pour mettre \xe0 jour ",(0,l.jsx)(s.code,{children:"vpn.olympus-lab.org"})," avec l'IP publique actuelle."]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h2,{id:"s\xe9curit",children:"S\xe9curit"})]})}function x(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>d,x:()=>t});var r=n(6540);const l={},i=r.createContext(l);function d(e){const s=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),r.createElement(i.Provider,{value:s},e.children)}}}]);