"use strict";(globalThis.webpackChunkhomelab_docs=globalThis.webpackChunkhomelab_docs||[]).push([[8130],{7735:e=>{e.exports=JSON.parse('{"archive":{"blogPosts":[{"id":"docker-services-deployment","metadata":{"permalink":"/blog/docker-services-deployment","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2025/12-02-docker-services-deployment.md","source":"@site/blog/2025/12-02-docker-services-deployment.md","title":"\ud83d\udc33 D\xe9ploiement de services Docker avec Dockge","description":"Aujourd\'hui, j\'ai d\xe9ploy\xe9 mes premiers services en production sur Olympus Lab en utilisant Docker et Dockge. L\'objectif : apprendre Docker en pratique, pas en regardant des cours !","date":"2025-12-02T23:00:00.000Z","tags":[{"inline":true,"label":"docker","permalink":"/blog/tags/docker"},{"inline":true,"label":"nextcloud","permalink":"/blog/tags/nextcloud"},{"inline":true,"label":"monitoring","permalink":"/blog/tags/monitoring"},{"inline":true,"label":"dockge","permalink":"/blog/tags/dockge"},{"inline":true,"label":"containers","permalink":"/blog/tags/containers"}],"readingTime":6.07,"hasTruncateMarker":true,"authors":[{"name":"N\xe9lia","title":"DevOps Student @ ESGI | Alternance ARPEGE","url":"https://github.com/panda-factory-gist","socials":{"github":"https://github.com/panda-factory-gist"},"imageURL":"https://github.com/panda-factory-gist.png","key":"nelia","page":null}],"frontMatter":{"slug":"docker-services-deployment","title":"\ud83d\udc33 D\xe9ploiement de services Docker avec Dockge","authors":"nelia","tags":["docker","nextcloud","monitoring","dockge","containers"],"date":"2025-12-02T23:00:00.000Z"},"unlisted":false,"nextItem":{"title":"\ud83c\udfdb\ufe0f Olympus Lab - Infrastructure compl\xe8te op\xe9rationnelle","permalink":"/blog/olympus-lab-setup"}},"content":"Aujourd\'hui, j\'ai d\xe9ploy\xe9 mes premiers services en production sur Olympus Lab en utilisant Docker et Dockge. L\'objectif : apprendre Docker en pratique, pas en regardant des cours !\\n\\n\x3c!--truncate--\x3e\\n\\n## \ud83c\udfaf Objectifs du jour\\n\\n- D\xe9ployer Dockge pour g\xe9rer les containers Docker\\n- Installer Uptime Kuma pour le monitoring\\n- D\xe9ployer Nextcloud comme cloud personnel\\n- Apprendre Docker Compose en pratique\\n\\n---\\n\\n## \ud83d\udce6 Services d\xe9ploy\xe9s\\n\\n### 1. Dockge (Gestion Docker)\\n\\n**Pourquoi** : Interface web pour g\xe9rer les stacks Docker Compose\\n\\n**Configuration** :\\n```yaml\\nservices:\\n  dockge:\\n    image: louislam/dockge:latest\\n    container_name: dockge\\n    restart: unless-stopped\\n    ports:\\n      - \\"5001:5001\\"\\n    volumes:\\n      - /var/run/docker.sock:/var/run/docker.sock\\n      - ./data:/app/data\\n      - ./stacks:/opt/stacks\\n    environment:\\n      - DOCKGE_STACKS_DIR=/opt/stacks\\n```\\n\\n**Acc\xe8s** : https: //dockge.[domain].org (prot\xe9g\xe9 par Cloudflare Access)\\n\\n**Avantages** :\\n- Interface graphique pour d\xe9ployer des stacks\\n- Logs en temps r\xe9el\\n- Start/Stop/Restart en un clic\\n- \xc9dition de docker-compose.yml directement\\n\\n---\\n\\n### 2. Uptime Kuma (Monitoring)\\n\\n**Pourquoi** : Surveillance 24/7 de tous les services\\n\\n**Configuration** :\\n```yaml\\nservices:\\n  uptime-kuma:\\n    image: louislam/uptime-kuma:latest\\n    container_name: uptime-kuma\\n    restart: unless-stopped\\n    ports:\\n      - \\"3001:3001\\"\\n    volumes:\\n      - uptime-kuma:/app/data\\n\\nvolumes:\\n  uptime-kuma:\\n```\\n\\n**Acc\xe8s** : https: //uptime.[domain].org\\n\\n**Services monitor\xe9s** :\\n- Proxmox\\n- OPNsense\\n- Dockge\\n- Nextcloud\\n- Documentation\\n\\n**Alertes** : Bot Discord \\"Iris\\" (\ud83c\udf08) pour notifications en temps r\xe9el\\n\\n---\\n\\n### 3. Nextcloud (Cloud personnel)\\n\\n**Pourquoi** : Partage de fichiers entre tous mes appareils (PC, laptop, t\xe9l\xe9phone)\\n\\n**Architecture** :\\n- Nextcloud (application)\\n- PostgreSQL (base de donn\xe9es)\\n- Redis (cache)\\n\\n**Configuration** :\\n```yaml\\nservices:\\n  nextcloud:\\n    image: nextcloud:latest\\n    container_name: nextcloud\\n    restart: unless-stopped\\n    ports:\\n      - \\"8083:80\\"\\n    environment:\\n      - POSTGRES_HOST=db\\n      - POSTGRES_DB=nextcloud\\n      - POSTGRES_USER=nextcloud\\n      - POSTGRES_PASSWORD=[mot-de-passe-fort]\\n      - REDIS_HOST=redis\\n      - NEXTCLOUD_TRUSTED_DOMAINS=[domain].org [IP-locale]\\n      - TRUSTED_PROXIES=172.16.0.0/12\\n      - OVERWRITEPROTOCOL=https\\n      - OVERWRITEHOST=[domain].org\\n    volumes:\\n      - nextcloud_data:/var/www/html\\n    depends_on:\\n      - db\\n      - redis\\n    networks:\\n      - nextcloud_net\\n\\n  db:\\n    image: postgres:16-alpine\\n    container_name: nextcloud-db\\n    restart: unless-stopped\\n    environment:\\n      - POSTGRES_DB=nextcloud\\n      - POSTGRES_USER=nextcloud\\n      - POSTGRES_PASSWORD=[mot-de-passe-fort]\\n    volumes:\\n      - db_data:/var/lib/postgresql/data\\n    networks:\\n      - nextcloud_net\\n\\n  redis:\\n    image: redis:alpine\\n    container_name: nextcloud-redis\\n    restart: unless-stopped\\n    networks:\\n      - nextcloud_net\\n\\nvolumes:\\n  nextcloud_data:\\n  db_data:\\n\\nnetworks:\\n  nextcloud_net:\\n```\\n\\n**Acc\xe8s** : https: //nextcloud.[domain].org\\n\\n**Fonctionnalit\xe9s** :\\n- Synchronisation automatique (desktop + mobile)\\n- Partage de fichiers\\n- Calendrier & Contacts\\n- Notes collaboratives\\n\\n---\\n\\n## \ud83d\udd27 Configuration Cloudflare Tunnel\\n\\n### Mise \xe0 jour du tunnel (Hermes)\\n\\n**Fichier** : `/etc/cloudflared/config.yml`\\n```yaml\\ntunnel: [tunnel-id]\\ncredentials-file: /etc/cloudflared/[tunnel-id].json\\n\\ningress:\\n  # Services existants\\n  - hostname: opnsense.[domain].org\\n    service: https: //10.0.1.1\\n    originServerName: 10.0.1.1\\n    originRequest:\\n      noTLSVerify: true\\n  \\n  - hostname: proxmox.[domain].org\\n    service: https://192.168.1.51:8006\\n    originRequest:\\n      noTLSVerify: true\\n  \\n  - hostname: ssh-proxmox.[domain].org\\n    service: ssh://192.168.1.51:22\\n  \\n  - hostname: ssh-docker.[domain].org\\n    service: ssh://10.0.1.102:22\\n  \\n  # Nouveaux services Docker\\n  - hostname: dockge.[domain].org\\n    service: http://10.0.1.102:5001\\n  \\n  - hostname: uptime.[domain].org\\n    service: http://10.0.1.102:3001\\n  \\n  - hostname: nextcloud.[domain].org\\n    service: http://10.0.1.102:8083\\n  \\n  # Catch-all\\n  - service: http_status:404\\n```\\n\\n**Red\xe9marrage** :\\n```bash\\nsystemctl restart cloudflared\\njournalctl -u cloudflared -f\\n```\\n\\n---\\n\\n## \ud83d\udd10 S\xe9curit\xe9\\n\\n### Cloudflare Access (Zero Trust)\\n\\n**Applications configur\xe9es** :\\n\\n| Service | URL | Policy | Session |\\n|---------|-----|--------|---------|\\n| Dockge | dockge.[domain].org | Email + OTP | 24h |\\n| Uptime Kuma | uptime.[domain].org | Email + OTP | 24h |\\n| Nextcloud | nextcloud.[domain].org | Email + OTP | 24h |\\n\\n**Protection multi-couches** :\\n1. Cloudflare Edge (DDoS, WAF)\\n2. Cloudflare Access (authentification email + OTP)\\n3. Cloudflare Tunnel (z\xe9ro port ouvert)\\n4. Firewall OPNsense (r\xe8gles granulaires)\\n5. Authentification service (login/password)\\n\\n### Isolation r\xe9seau\\n\\n**VM Docker** : R\xe9seau LAN (10.0.1.0/24)\\n- \u2705 Acc\xe8s Internet\\n- \u2705 Communication interne LAN\\n- \u274c Pas d\'acc\xe8s DMZ, DEV, MGMT\\n\\n**Containers Docker** : R\xe9seau bridge isol\xe9 (172.x.x.x/12)\\n- Communication entre containers de la m\xeame stack uniquement\\n- Pas d\'acc\xe8s direct aux autres containers\\n\\n---\\n\\n## \ud83d\udcda Apprentissage Docker\\n\\n### Ce que j\'ai appris en pratique\\n\\n#### 1. Docker Compose - Structure\\n\\n**Services** : Liste des containers \xe0 cr\xe9er\\n```yaml\\nservices:\\n  mon-app:\\n    image: ...\\n    ports: ...\\n    volumes: ...\\n```\\n\\n#### 2. Images Docker\\n```yaml\\nimage: nextcloud:latest\\n```\\n- `nextcloud` = nom de l\'image\\n- `:latest` = tag (version)\\n\\n**Alternatives** :\\n- `:1.23.11` = version sp\xe9cifique (plus stable)\\n- `:alpine` = version l\xe9g\xe8re\\n\\n#### 3. Ports\\n```yaml\\nports:\\n  - \\"8083:80\\"\\n```\\n- `8083` = port sur la VM (externe)\\n- `80` = port dans le container (interne)\\n\\n**Utilisation** : `http://10.0.1.102:8083` pointe vers le port 80 du container\\n\\n#### 4. Volumes (persistance des donn\xe9es)\\n\\n**Volumes nomm\xe9s** :\\n```yaml\\nvolumes:\\n  - nextcloud_data:/var/www/html\\n\\nvolumes:\\n  nextcloud_data:  # D\xe9claration\\n```\\n- G\xe9r\xe9 par Docker\\n- Stock\xe9 dans `/var/lib/docker/volumes/`\\n- Persiste m\xeame si container supprim\xe9\\n\\n**Bind mounts** :\\n```yaml\\nvolumes:\\n  - ./data:/app/data\\n```\\n- Dossier local mont\xe9 directement\\n- Fichiers visibles sur la VM\\n- Modifiable \xe0 chaud\\n\\n#### 5. Networks (communication inter-containers)\\n```yaml\\nnetworks:\\n  - nextcloud_net\\n\\nnetworks:\\n  nextcloud_net:  # D\xe9claration\\n```\\n\\n**Utilit\xe9** : Les containers sur le m\xeame network peuvent communiquer par nom\\n- `nextcloud` peut joindre `db` directement\\n- `POSTGRES_HOST=db` fonctionne\\n\\n#### 6. Environment variables\\n```yaml\\nenvironment:\\n  - POSTGRES_PASSWORD=secure123\\n  - POSTGRES_HOST=db\\n```\\n\\n**Configuration sans rebuild** : Change le comportement du container\\n\\n#### 7. Depends_on (ordre de d\xe9marrage)\\n```yaml\\ndepends_on:\\n  - db\\n  - redis\\n```\\n\\n**Utilit\xe9** : Nextcloud d\xe9marre APR\xc8S PostgreSQL et Redis\\n\\n#### 8. Restart policies\\n```yaml\\nrestart: unless-stopped\\n```\\n\\n**Options** :\\n- `no` : Ne jamais red\xe9marrer\\n- `always` : Toujours red\xe9marrer (m\xeame si arr\xeat\xe9 manuellement)\\n- `unless-stopped` : Red\xe9marrer sauf si arr\xeat\xe9 volontairement\\n- `on-failure` : Red\xe9marrer seulement si erreur\\n\\n---\\n\\n## \ud83d\udc1b Probl\xe8mes rencontr\xe9s et solutions\\n\\n### Probl\xe8me 1 : Cache navigateur\\n\\n**Sympt\xf4me** : \\"Unable to find your Access application\\"\\n**Cause** : Cache SSL du navigateur\\n**Solution** : Navigation priv\xe9e ou vider le cache (Ctrl+Shift+Delete)\\n\\n### Probl\xe8me 2 : PostgreSQL sans mot de passe\\n\\n**Sympt\xf4me** : `POSTGRES_PASSWORD is not specified`\\n**Cause** : Variable d\'environnement mal format\xe9e\\n**Solution** : Utiliser `- POSTGRES_PASSWORD=xxx` (avec le tiret)\\n\\n### Probl\xe8me 3 : Nextcloud ne peut pas joindre \\"db\\"\\n\\n**Sympt\xf4me** : `could not translate host name \\"db\\"`\\n**Cause** : Containers pas sur le m\xeame r\xe9seau Docker\\n**Solution** : V\xe9rifier la section `networks` dans docker-compose.yml\\n\\n### Probl\xe8me 4 : Configuration Nextcloud prot\xe9g\xe9e\\n\\n**Sympt\xf4me** : `Configuration was not read or initialized correctly`\\n**Cause** : Tentative de r\xe9installation avec donn\xe9es existantes\\n**Solution** : `docker compose down -v` pour supprimer les volumes\\n\\n---\\n\\n## \ud83d\udcca Architecture finale\\n```\\nInternet\\n    \u2193\\nCloudflare Edge (DDoS, WAF)\\n    \u2193\\nCloudflare Access (Email + OTP)\\n    \u2193\\nCloudflare Tunnel (Hermes CT-202)\\n    \u2193\\nVM Docker (10.0.1.102)\\n    \u2193\\n    \u251c\u2500\u2192 Dockge :5001\\n    \u251c\u2500\u2192 Uptime Kuma :3001\\n    \u2514\u2500\u2192 Nextcloud Stack\\n        \u251c\u2500\u2192 nextcloud :80\\n        \u251c\u2500\u2192 postgres :5432\\n        \u2514\u2500\u2192 redis :6379\\n```\\n\\n---\\n\\n## \ud83c\udfaf Prochaines \xe9tapes\\n\\n### Cette semaine\\n- [ ] Installer app Nextcloud sur tous les appareils\\n- [ ] Pr\xe9parer projet Docker Compose pour l\'\xe9cole\\n- [ ] Activer 2FA sur OPNsense et Proxmox\\n\\n### D\xe9cembre 2025\\n- [ ] Python (Automate the Boring Stuff)\\n- [ ] Networking (Practical Networking)\\n- [ ] Utiliser Nextcloud en mobilit\xe9\\n\\n### Janvier 2026\\n- [ ] GitLab CE ou Gitea (h\xe9bergement code)\\n- [ ] Prometheus + Grafana (monitoring avanc\xe9)\\n- [ ] Pi-hole (DNS + blocage pub)\\n\\n---\\n\\n## \ud83d\udcad R\xe9flexions\\n\\n### L\'apprentissage par la pratique\\n\\nJ\'ai r\xe9alis\xe9 aujourd\'hui que **je n\'aime pas les cours th\xe9oriques**, j\'aime **FAIRE**.\\n\\n**Avant** : \\"Docker c\'est compliqu\xe9, il faut apprendre toutes les commandes\\"\\n**Maintenant** : \\"Docker c\'est juste un outil, on l\'utilise quand on en a besoin\\"\\n\\n**La diff\xe9rence** :\\n- \u274c Cours Udemy : 20h de vid\xe9os th\xe9oriques \u2192 Ennui \u2192 Oubli\\n- \u2705 Projet concret : \\"Je veux Nextcloud\\" \u2192 Docker Compose \u2192 D\xe9ploiement \u2192 Apprentissage r\xe9el\\n\\n### Ce que j\'ai vraiment appris\\n\\n- \ud83d\udc33 **Docker Compose** : Services, volumes, networks, environment\\n- \ud83d\udd27 **Debugging** : Lire les logs, comprendre les erreurs, tester\\n- \ud83c\udf10 **Networking** : Communication inter-containers, isolation\\n- \ud83c\udfaf **M\xe9thodologie** : D\xe9ployer, casser, r\xe9parer, documenter\\n\\n**Et tout \xe7a en UNE journ\xe9e** parce que j\'avais un **objectif concret** : avoir un cloud perso.\\n\\n### Pour les d\xe9butants\\n\\nSi tu d\xe9butes en Docker :\\n1. **Ne regarde PAS 20h de cours**\\n2. **Choisis UN service** que tu veux d\xe9ployer\\n3. **Trouve un docker-compose.yml**\\n4. **D\xe9ploie-le**\\n5. **Casse-le**\\n6. **Comprends pourquoi**\\n7. **R\xe9pare-le**\\n8. **R\xe9p\xe8te**\\n\\nTu apprendras **10x plus vite** qu\'en regardant des cours.\\n\\n---\\n\\n## \ud83d\udcc8 Statistiques\\n\\n**Temps investi** : ~6 heures\\n- D\xe9ploiement Dockge : 30 min\\n- D\xe9ploiement Uptime Kuma : 45 min\\n- Configuration Iris (Discord) : 15 min\\n- D\xe9ploiement Nextcloud : 3h (debug inclus)\\n- Documentation : 1h\\n\\n**Services d\xe9ploy\xe9s** : 3 stacks (6 containers)\\n**Probl\xe8mes r\xe9solus** : 4 (cache, PostgreSQL, r\xe9seau, config)\\n**Lignes de YAML \xe9crites** : ~150\\n**Caf\xe9 consomm\xe9** : Beaucoup \u2615\\n\\n---\\n\\n## \ud83d\udd17 Ressources\\n\\n**Documentation** :\\n- Docker Compose : https://docs.docker.com/compose/\\n- Nextcloud : https://hub.docker.com/_/nextcloud\\n- Dockge : https://github.com/louislam/dockge\\n- Uptime Kuma : https://github.com/louislam/uptime-kuma\\n\\n**Mon infrastructure** :\\n- Documentation : https: //docs.[domain].org\\n- Monitoring : https: //uptime.[domain].org\\n\\n---\\n\\n**Stack** : Docker \u2022 Docker Compose \u2022 Dockge \u2022 Nextcloud \u2022 PostgreSQL \u2022 Redis \u2022 Uptime Kuma\\n\\n**Tags** : #Docker #Containers #Nextcloud #Cloud #DevOps #Learning"},{"id":"olympus-lab-setup","metadata":{"permalink":"/blog/olympus-lab-setup","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2025/12-01-olympus-lab-setup.md","source":"@site/blog/2025/12-01-olympus-lab-setup.md","title":"\ud83c\udfdb\ufe0f Olympus Lab - Infrastructure compl\xe8te op\xe9rationnelle","description":"Aujourd\'hui marque l\'ach\xe8vement de l\'infrastructure Olympus Lab, mon homelab DevOps personnel. Apr\xe8s plusieurs semaines de travail, j\'ai enfin une plateforme compl\xe8te pour apprendre et exp\xe9rimenter en toute s\xe9curit\xe9.","date":"2025-12-01T13:00:00.000Z","tags":[{"inline":true,"label":"infrastructure","permalink":"/blog/tags/infrastructure"},{"inline":true,"label":"proxmox","permalink":"/blog/tags/proxmox"},{"inline":true,"label":"opnsense","permalink":"/blog/tags/opnsense"},{"inline":true,"label":"cloudflare","permalink":"/blog/tags/cloudflare"},{"inline":true,"label":"homelab","permalink":"/blog/tags/homelab"},{"inline":true,"label":"devops","permalink":"/blog/tags/devops"}],"readingTime":8.31,"hasTruncateMarker":true,"authors":[{"name":"N\xe9lia","title":"DevOps Student @ ESGI | Alternance ARPEGE","url":"https://github.com/panda-factory-gist","socials":{"github":"https://github.com/panda-factory-gist"},"imageURL":"https://github.com/panda-factory-gist.png","key":"nelia","page":null}],"frontMatter":{"slug":"olympus-lab-setup","title":"\ud83c\udfdb\ufe0f Olympus Lab - Infrastructure compl\xe8te op\xe9rationnelle","authors":"nelia","tags":["infrastructure","proxmox","opnsense","cloudflare","homelab","devops"],"date":"2025-12-01T13:00:00.000Z"},"unlisted":false,"prevItem":{"title":"\ud83d\udc33 D\xe9ploiement de services Docker avec Dockge","permalink":"/blog/docker-services-deployment"}},"content":"Aujourd\'hui marque l\'ach\xe8vement de l\'infrastructure **Olympus Lab**, mon homelab DevOps personnel. Apr\xe8s plusieurs semaines de travail, j\'ai enfin une plateforme compl\xe8te pour apprendre et exp\xe9rimenter en toute s\xe9curit\xe9.\\n\\n\\n\x3c!--truncate--\x3e\\n\\n## \ud83c\udfaf Le contexte\\n\\nJe suis actuellement en alternance chez ARPEGE \xe0 Nantes en tant qu\'\xe9tudiante DevOps (TSSR \xe0 l\'ESGI). Mon apprentissage se concentre sur :\\n- Ansible pour l\'automatisation\\n- GitLab CI/CD pour les pipelines\\n- Docker & Kubernetes pour la conteneurisation\\n- Oracle Cloud Infrastructure pour le d\xe9ploiement\\n\\nMais pour vraiment ma\xeetriser ces technologies, j\'avais besoin d\'un environnement o\xf9 je peux **casser, reconstruire, exp\xe9rimenter** sans limites. D\'o\xf9 **Olympus Lab** ! \ud83c\udfdb\ufe0f\\n\\n## \ud83c\udfd7\ufe0f Architecture finale\\n\\n### Le setup physique\\n\\n**Machine** : Lenovo ThinkCentre M710S\\n- CPU : Intel i5 (suffisant pour commencer)\\n- RAM : 16 GB (\xe0 upgrader plus tard)\\n- Stockage : SSD pour l\'OS, HDD pour les VMs\\n- R\xe9seau : 1 Gbps vers la box Internet\\n\\n### Les composants logiciels\\n\\n#### 1. **Proxmox VE** (Atlas dans ma nomenclature)\\n\\nL\'hyperviseur qui fait tourner tout le reste. J\'ai configur\xe9 5 bridges r\xe9seau :\\n- `vmbr0` : WAN (192.168.1.0/24) - Connexion Internet\\n- `vmbr1` : LAN (10.0.1.0/24) - Production\\n- `vmbr2` : DMZ (10.0.2.0/24) - Services expos\xe9s\\n- `vmbr3` : DEV (10.0.3.0/24) - Environnement de test\\n- `vmbr4` : MGMT (10.0.4.0/24) - Administration\\n\\n#### 2. **OPNsense** (Olympus - VM 100)\\n\\nLe firewall FreeBSD qui g\xe8re toute la segmentation r\xe9seau. Configuration :\\n- 5 interfaces r\xe9seau (1 par bridge)\\n- R\xe8gles firewall strictes avec isolation compl\xe8te\\n- DHCP sur chaque r\xe9seau\\n- DNS forwarding vers Cloudflare (1.1.1.1)\\n\\n#### 3. **Cloudflare Tunnel** (Hermes - Container 202)\\n\\nLe messager qui me permet d\'acc\xe9der \xe0 mon homelab depuis n\'importe o\xf9. Ubuntu 24.04 LXC avec `cloudflared` :\\n- 256 MB RAM (ultra l\xe9ger)\\n- Tunnel chiffr\xe9 vers Cloudflare Edge\\n- Z\xe9ro port ouvert sur ma box Internet\\n- Authentification Zero Trust avec Cloudflare Access\\n\\n## \ud83c\udf10 Segmentation r\xe9seau\\n\\nLe point le plus important : **l\'isolation des r\xe9seaux**.\\n```\\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\\n\u2502              Internet                        \u2502\\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\\n                   \u2502 WAN (192.168.1.0/24)\\n            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510\\n            \u2502  OPNsense   \u2502 \u2190 Firewall central\\n            \u2502  (Olympus)  \u2502\\n            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\\n       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\\n       \u2502           \u2502           \u2502         \u2502\\n   \u250c\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u25bc\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u25bc\u2500\u2500\u2510  \u250c\u2500\u2500\u25bc\u2500\u2500\u2500\u2510\\n   \u2502  LAN  \u2502   \u2502 DMZ \u2502    \u2502 DEV  \u2502  \u2502 MGMT \u2502\\n   \u2502 Prod  \u2502   \u2502 Web \u2502    \u2502 Test \u2502  \u2502Admin \u2502\\n   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2518\\n```\\n\\n### Les r\xe8gles qui changent tout\\n\\n**LAN** (Production) :\\n- \u2705 Acc\xe8s Internet\\n- \u2705 Communication interne au LAN\\n- \u274c Acc\xe8s aux autres r\xe9seaux (DMZ, DEV, MGMT)\\n\\n**DMZ** (Services expos\xe9s) :\\n- \u2705 Acc\xe8s Internet uniquement\\n- \u274c **Aucun acc\xe8s** aux r\xe9seaux internes\\n\\n**DEV** (D\xe9veloppement) :\\n- \u2705 Acc\xe8s Internet uniquement\\n- \u274c **Aucun acc\xe8s** aux r\xe9seaux internes\\n\\n**MGMT** (Administration) :\\n- \u2705 **Acc\xe8s partout** (pour g\xe9rer l\'infrastructure)\\n\\n**Pourquoi c\'est important ?** Si je fais une erreur en DEV ou si un service en DMZ est compromis, l\'attaquant ne peut **pas** rebondir vers la production. C\'est le principe de **Defense in Depth**.\\n\\n## \ud83d\udd12 S\xe9curit\xe9 multi-couches\\n\\n### Couche 1 : Cloudflare Edge\\n- Protection DDoS automatique\\n- WAF (Web Application Firewall)\\n- Filtrage g\xe9ographique possible\\n\\n### Couche 2 : Cloudflare Access (Zero Trust)\\n- Authentification obligatoire par email\\n- Code OTP \xe0 usage unique\\n- Logs d\'audit de toutes les connexions\\n- Session limit\xe9e \xe0 24h\\n\\n### Couche 3 : Cloudflare Tunnel\\n- Connexion chiffr\xe9e sortante uniquement\\n- Aucun port ouvert sur ma box\\n- IP publique cach\xe9e\\n- Impossible de scanner mon r\xe9seau depuis Internet\\n\\n### Couche 4 : OPNsense Firewall\\n- Firewall stateful (pf de FreeBSD)\\n- Default Deny : tout bloqu\xe9 par d\xe9faut\\n- R\xe8gles granulaires par r\xe9seau\\n- Logs de toutes les tentatives bloqu\xe9es\\n\\n### Couche 5 : Services individuels\\n- 2FA sur Proxmox (TOTP)\\n- 2FA sur OPNsense (Google Authenticator)\\n- Mots de passe forts (20+ caract\xe8res)\\n- Cl\xe9s SSH pour l\'authentification\\n\\n## \u2601\ufe0f Acc\xe8s distant sans port forwarding\\n\\nLe gros challenge : comment acc\xe9der \xe0 mon homelab depuis chez mes parents en d\xe9cembre ?\\n\\n**Solution classique** : Port forwarding (ouvrir le port 51820 pour WireGuard)\\n- \u274c Port ouvert = surface d\'attaque\\n- \u274c IP publique expos\xe9e\\n- \u274c Risque de scan et brute force\\n\\n**Ma solution** : Cloudflare Tunnel\\n- \u2705 Connexion sortante uniquement (aucun port ouvert)\\n- \u2705 IP publique masqu\xe9e\\n- \u2705 Authentification obligatoire\\n- \u2705 Gratuit !\\n\\n### Services accessibles\\n\\nJ\'ai configur\xe9 trois points d\'acc\xe8s via Cloudflare Tunnel :\\n- **Interface de virtualisation** : Gestion des VMs et containers\\n- **Interface du firewall** : Configuration des r\xe8gles r\xe9seau\\n- **Acc\xe8s SSH** : Administration en ligne de commande\\n\\nTous prot\xe9g\xe9s par Cloudflare Access avec authentification obligatoire (email + code OTP).\\n\\nExemple d\'utilisation SSH :\\n```bash\\n# Sur mon laptop, n\'importe o\xf9 dans le monde\\nssh homelab-ssh\\n\\n# Cloudflare ouvre le navigateur pour l\'authentification\\n# Code OTP par email\\n# Connexion \xe9tablie \u2705\\n```\\n\\n**Note de s\xe9curit\xe9** : Les URLs exactes ne sont pas publi\xe9es publiquement. \\nProchaine \xe9tape : Activation du 2FA sur tous les services (en cours).\\n\\n## \ud83d\udcda Documentation compl\xe8te\\n\\nTout est document\xe9 sur [docs.olympus-lab.org](https://docs.olympus-lab.org) avec Docusaurus :\\n\\n- **Architecture** : Vue d\'ensemble, diagrammes r\xe9seau\\n- **Proxmox** : Configuration, bridges, VMs, containers\\n- **OPNsense** : Firewall, r\xe8gles d\xe9taill\xe9es, DHCP, NAT\\n- **Cloudflare Tunnel** : Setup, configuration, troubleshooting\\n- **S\xe9curit\xe9** : R\xe8gles firewall expliqu\xe9es, threat model\\n- **Proc\xe9dures** : Acc\xe8s distant, maintenance, backups\\n\\nLa doc est h\xe9berg\xe9e sur GitHub Pages avec d\xe9ploiement automatique via GitHub Actions. Chaque `git push` met \xe0 jour le site.\\n\\n## \ud83d\udee0\ufe0f Les gal\xe8res et apprentissages\\n\\n### Probl\xe8me 1 : Changement de hostname Proxmox\\n\\nJ\'ai voulu renommer `fox-factory` en `atlas` (nomenclature mythologique grecque). **Grosse erreur** ! Proxmox garde les r\xe9f\xe9rences au nom original dans `/etc/pve/`, qui est un filesystem cluster sp\xe9cial.\\n\\n**R\xe9sultat** : Tous mes containers et VMs ont disparu de l\'interface ! \ud83d\ude31\\n\\n**Solution** : Revenir \xe0 `fox-factory` en interne, utiliser `atlas` uniquement dans la doc publique. Le\xe7on apprise : **ne jamais renommer un node Proxmox en production**.\\n\\n### Probl\xe8me 2 : Container Cloudflare Tunnel perdu\\n\\nLors des tentatives de renommage, le disque du container 202 a \xe9t\xe9 supprim\xe9. Heureusement, **j\'avais un backup** du dossier `/etc/cloudflared/` !\\n\\n**Solution** : Recr\xe9er le container from scratch, restaurer la config. 10 minutes et c\'\xe9tait reparti. **Les backups sauvent des vies** ! \ud83d\udcbe\\n\\n### Probl\xe8me 3 : Tailscale subnet routing\\n\\nJ\'ai essay\xe9 Tailscale pour l\'acc\xe8s distant. Installation ultra simple, mais le **subnet routing** ne fonctionnait pas : impossible d\'acc\xe9der \xe0 OPNsense (10.0.1.1) depuis mon laptop.\\n\\n**Pourquoi ?** Tailscale donne acc\xe8s au r\xe9seau de la machine o\xf9 il est install\xe9 (192.168.1.x), pas aux r\xe9seaux virtuels internes (10.0.x.x).\\n\\n**Solution** : Passer \xe0 Cloudflare Tunnel qui est con\xe7u pour exposer des services internes, pas pour cr\xe9er un VPN mesh.\\n\\n### Probl\xe8me 4 : Certificats SSL auto-sign\xe9s\\n\\nProxmox et OPNsense utilisent des certificats auto-sign\xe9s. Les navigateurs affichent des warnings.\\n\\n**Solution temporaire** : Accepter le risque (je sais que c\'est mon propre serveur).\\n\\n**Solution future** : G\xe9n\xe9rer des vrais certificats Let\'s Encrypt via Cloudflare DNS challenge ou ACME.\\n\\n## \ud83d\udcca Stack technique compl\xe8te\\n\\n| Composant | Technologie | Version |\\n|-----------|-------------|---------|\\n| Hyperviseur | Proxmox VE | 8.x |\\n| Firewall | OPNsense | 24.7 |\\n| Tunnel | Cloudflare Tunnel | Latest |\\n| OS Containers | Ubuntu | 24.04 LTS |\\n| Documentation | Docusaurus | 3.x |\\n| Hosting Doc | GitHub Pages | - |\\n| Domaine | Cloudflare | olympus-lab.org |\\n| DNS | Cloudflare | 1.1.1.1 |\\n\\n**Co\xfbt total** : ~12\u20ac/an (juste le domaine, tout le reste est gratuit !)\\n\\n## \ud83d\ude80 Prochaines \xe9tapes\\n\\n### D\xe9cembre 2025 (chez mes parents)\\n- [ ] Tester l\'acc\xe8s distant en conditions r\xe9elles\\n- [ ] Commencer Python (Automate the Boring Stuff)\\n- [ ] Continuer Practical Networking (cours en ligne)\\n- [ ] Exp\xe9rimenter dans le r\xe9seau DEV\\n\\n### Janvier 2026 (retour \xe0 Nantes)\\n- [ ] D\xe9ployer **GitLab CE** en LAN pour le CI/CD\\n- [ ] Installer **Pi-hole** pour le DNS local + blocage pub\\n- [ ] Setup **Prometheus + Grafana** pour le monitoring\\n- [ ] Configurer les **backups automatiques** (Proxmox Backup Server ?)\\n\\n### Q1 2026\\n- [ ] Apprendre **WireGuard** (dans des VMs de test)\\n- [ ] D\xe9ployer un cluster **K3s** en DEV\\n- [ ] Automatiser avec **Ansible** (playbooks pour tout)\\n- [ ] Ajouter un deuxi\xe8me node Proxmox (si budget)\\n\\n### Long terme\\n- [ ] Certifications : AWS, Azure, Kubernetes\\n- [ ] Contribuer \xe0 des projets open source\\n- [ ] Documenter et partager mes apprentissages\\n\\n## \ud83d\udcad R\xe9flexions\\n\\n### Ce que j\'ai appris\\n\\n**Networking** : Avant ce projet, les VLANs et la segmentation r\xe9seau \xe9taient abstraits. Maintenant, je **comprends** vraiment comment fonctionne un firewall, le NAT, le routing, les ACLs. J\'ai cass\xe9 des choses, debugg\xe9 pendant des heures, et c\'est comme \xe7a qu\'on apprend vraiment.\\n\\n**S\xe9curit\xe9** : Le principe de **Defense in Depth** n\'est pas juste th\xe9orique. Chaque couche compte. Si j\'avais juste fait du port forwarding basique, j\'aurais un point d\'entr\xe9e unique. Maintenant, pour atteindre mes services, il faut :\\n1. Passer Cloudflare Edge (DDoS protection)\\n2. S\'authentifier via Access (email + OTP)\\n3. Traverser le tunnel chiffr\xe9\\n4. Passer le firewall OPNsense\\n5. S\'authentifier sur le service final\\n\\n**Infrastructure as Code** : Documenter tout dans Docusaurus me force \xe0 comprendre ce que je fais. Si je ne peux pas l\'expliquer clairement dans la doc, c\'est que je ne le comprends pas vraiment. La doc devient aussi un **backup de ma connaissance**.\\n\\n**\xc9checs = Apprentissage** : J\'ai cass\xe9 mon infrastructure plusieurs fois. Chaque fois, j\'ai appris :\\n- L\'importance des backups\\n- Comment d\xe9bugger m\xe9thodiquement\\n- La valeur de la documentation\\n- Qu\'il faut tester avant de modifier la prod\\n\\n### Pourquoi un homelab en 2025 ?\\n\\nCertains diraient : \\"Pourquoi ne pas juste utiliser AWS ou Azure ?\\"\\n\\n**Ma r\xe9ponse** :\\n- Je veux comprendre **comment \xe7a marche en dessous**\\n- Les clouds abstraient trop de choses\\n- Un homelab, c\'est **gratuit** (apr\xe8s l\'investissement initial)\\n- Je peux casser sans craindre une facture de 500\u20ac\\n- C\'est **mon** labo, mes r\xe8gles, mes exp\xe9rimentations\\n\\nEn alternance, je travaille sur Oracle Cloud et GitLab. Mais dans mon homelab, je peux tout essayer : k3s, Ansible, Terraform, Prometheus, sans limite.\\n\\n## \ud83c\udf93 Pour les d\xe9butants qui lisent \xe7a\\n\\nSi tu d\xe9butes en DevOps et que tu veux cr\xe9er ton homelab :\\n\\n### Commence petit\\n- Une seule VM suffit au d\xe9but\\n- Pas besoin de segmentation r\xe9seau complexe\\n- Apprends Proxmox ou VirtualBox d\'abord\\n\\n### Documente tout\\n- Prends des notes\\n- Capture des screenshots\\n- \xc9cris les commandes que tu utilises\\n- Future toi te remerciera\\n\\n### Casse des choses\\n- Les erreurs sont tes meilleures profs\\n- Fais des snapshots avant de modifier\\n- Teste dans un environnement isol\xe9 (DEV)\\n\\n### Apprends les bases\\n- **Networking** : Comprends IP, subnets, routing, NAT\\n- **Linux** : CLI, permissions, services systemd\\n- **Virtualisation** : Concepts de VMs, containers, hyperviseurs\\n\\n### S\xe9curit\xe9 d\'abord\\n- Jamais de port forwarding sans r\xe9fl\xe9chir\\n- Toujours des mots de passe forts\\n- 2FA partout o\xf9 c\'est possible\\n- Backups r\xe9guliers\\n\\n## \ud83d\udcc8 M\xe9triques\\n\\nDepuis le d\xe9but du projet :\\n\\n- **Temps investi** : ~40 heures (configuration, debug, doc)\\n- **Erreurs commises** : Trop pour compter (c\'est \xe7a apprendre !)\\n- **Services d\xe9ploy\xe9s** : 3 (Proxmox, OPNsense, Cloudflare Tunnel)\\n- **Lignes de doc** : ~3000 (7 fichiers Markdown)\\n- **Commits Git** : 15+\\n- **Caf\xe9 consomm\xe9** : Beaucoup \u2615\\n\\n## \ud83c\udf38 Nomenclature mythologique\\n\\nParce que DevOps, c\'est aussi s\'amuser :\\n\\n- **Atlas** : Proxmox node (le titan qui porte l\'infrastructure)\\n- **Olympus** : OPNsense (le mont Olympe, centre de contr\xf4le)\\n- **Hermes** : Cloudflare Tunnel (le messager des dieux)\\n\\nProchains services :\\n- **Hephaestus** : GitLab (la forge de code)\\n- **Prometheus** : Monitoring (appropri\xe9 !)\\n- **Apollo** : CI/CD pipeline\\n- **Artemis** : Backup system\\n- **Poseidon** : Storage server\\n\\nLogo : \ud83c\udf38 Hanami (fleur de cerisier) + \ud83c\udf19 Lune = esth\xe9tique japonaise + mythologie grecque.\\n\\n## \ud83c\udf89 Conclusion\\n\\n**Olympus Lab est maintenant op\xe9rationnel** ! Je peux :\\n- \u2705 Cr\xe9er des VMs et containers \xe0 volont\xe9\\n- \u2705 Exp\xe9rimenter en toute s\xe9curit\xe9\\n- \u2705 Acc\xe9der depuis n\'importe o\xf9\\n- \u2705 Apprendre en cassant et r\xe9parant\\n- \u2705 Documenter mes apprentissages\\n\\nLa prochaine fois que quelqu\'un me demandera \\"C\'est quoi DevOps ?\\", je pourrai montrer mon homelab et dire : **\\"C\'est \xe7a. Et c\'est moi qui l\'ai construit.\\"** \ud83d\udcaa\\n\\nRendez-vous dans le prochain article pour le d\xe9ploiement de GitLab ! \ud83d\ude80\\n\\n---\\n\\n**Stack** : Proxmox VE \u2022 OPNsense \u2022 Cloudflare Tunnel \u2022 Ubuntu 24.04 \u2022 Docusaurus\\n\\n**Tags** : #DevOps #Homelab #Infrastructure #Networking #Security #Learning\\n\\n**Documentation** : [docs.olympus-lab.org](https://docs.olympus-lab.org)"}]}}')}}]);